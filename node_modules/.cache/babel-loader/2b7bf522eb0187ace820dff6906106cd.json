{"ast":null,"code":"import _regeneratorRuntime from\"G:/projects/photogram/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"G:/projects/photogram/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"G:/projects/photogram/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Avatar,Button}from\"@material-ui/core\";import Skeleton from\"@material-ui/lab/Skeleton\";import React,{useContext,useEffect,useState}from\"react\";import{Link}from\"react-router-dom\";import Usercontext from\"../context/user\";import{findActiveUser,getSuggestedProfile}from\"../services/firebase\";import\"./timeline.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Timeline(){var user=useContext(Usercontext);var _useState=useState(null),_useState2=_slicedToArray(_useState,2),activeUser=_useState2[0],setActiveUser=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),suggestion=_useState4[0],setSuggestion=_useState4[1];// if (user) {\n//   console.log(user.user.uid);\n// }\nuseEffect(function(){function getActiveUser(){return _getActiveUser.apply(this,arguments);}function _getActiveUser(){_getActiveUser=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var activeuser,actUsr,suggestedprofile;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return findActiveUser(user.user.uid);case 2:activeuser=_context.sent;_context.next=5;return activeuser;case 5:actUsr=_context.sent;setActiveUser(actUsr);// console.log(\"now\", activeuser);\n_context.next=9;return getSuggestedProfile(actUsr[0].following);case 9:suggestedprofile=_context.sent;setSuggestion(suggestedprofile);case 11:case\"end\":return _context.stop();}}},_callee);}));return _getActiveUser.apply(this,arguments);}if(user.user){getActiveUser();}},[user]);return/*#__PURE__*/_jsxs(\"div\",{className:\"timeline\",children:[user.user&&activeUser?/*#__PURE__*/_jsxs(\"div\",{className:\"timeline__header\",children:[/*#__PURE__*/_jsx(Link,{to:\"/profile/\".concat(user.user.uid),children:/*#__PURE__*/_jsx(Avatar,{src:activeUser[0].profile_photo,alt:\"profilePhoto\",style:{border:\"1px solid black\",marginRight:\"10px\"}})}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{style:{fontSize:\"17px\"},children:activeUser[0].username}),\" \",/*#__PURE__*/_jsx(\"span\",{style:{fontSize:\"10px\"},children:activeUser[0].fullName})]})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"timeline__header\",children:[/*#__PURE__*/_jsx(Skeleton,{variant:\"circle\",width:50,height:50}),/*#__PURE__*/_jsx(Skeleton,{variant:\"text\",width:70,height:30,className:\"timeline__username\"})]}),/*#__PURE__*/_jsx(\"p\",{style:{color:\"gray\",fontSize:\"15px\",marginTop:\"3vh\"},children:\"Suggestion For You\"}),user.user&&activeUser&&suggestion?suggestion.map(function(suggest){return/*#__PURE__*/_jsxs(\"div\",{className:\"timeline__suggestion\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"timeline__suggestion__left\",style:{display:\"flex\",marginTop:\"15px\"},children:[suggest.profile_photo?/*#__PURE__*/_jsx(Avatar,{style:{marginRight:\"5px\",border:\"1px solid gray\"},src:suggest.profile_photo}):/*#__PURE__*/_jsx(Avatar,{style:{marginRight:\"5px\",border:\"1px solid gray\"}}),/*#__PURE__*/_jsx(\"p\",{children:suggest.username})]}),/*#__PURE__*/_jsx(\"div\",{className:\"timeline__suggestion__left\",children:/*#__PURE__*/_jsx(\"h4\",{style:{color:\"blue\"},children:/*#__PURE__*/_jsx(Link,{to:\"/profile/\".concat(suggest.userId),style:{textDecoration:'none'},children:\"profile\"})})})]},suggest.postId);}):/*#__PURE__*/_jsxs(\"div\",{className:\"timeline__suggestion\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"timeline__suggestion__left\",children:[/*#__PURE__*/_jsx(Skeleton,{variant:\"circle\",width:40,height:40}),/*#__PURE__*/_jsx(Skeleton,{variant:\"text\",width:70,height:20,className:\"timeline__suggestion__left__text\"})]}),/*#__PURE__*/_jsx(Skeleton,{variant:\"text\",width:45,height:30})]})]});}export default Timeline;","map":{"version":3,"sources":["G:/projects/photogram/src/components/Timeline.js"],"names":["Avatar","Button","Skeleton","React","useContext","useEffect","useState","Link","Usercontext","findActiveUser","getSuggestedProfile","Timeline","user","activeUser","setActiveUser","suggestion","setSuggestion","getActiveUser","uid","activeuser","actUsr","following","suggestedprofile","profile_photo","border","marginRight","fontSize","username","fullName","color","marginTop","map","suggest","display","userId","textDecoration","postId"],"mappings":"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","sourcesContent":["import { Avatar, Button } from \"@material-ui/core\";\r\nimport Skeleton from \"@material-ui/lab/Skeleton\";\r\nimport React, { useContext, useEffect, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Usercontext from \"../context/user\";\r\nimport { findActiveUser, getSuggestedProfile } from \"../services/firebase\";\r\nimport \"./timeline.css\";\r\n\r\nfunction Timeline() {\r\n  const user = useContext(Usercontext);\r\n  const [activeUser, setActiveUser] = useState(null);\r\n  const [suggestion, setSuggestion] = useState(null);\r\n\r\n  // if (user) {\r\n  //   console.log(user.user.uid);\r\n  // }\r\n\r\n  useEffect(() => {\r\n    async function getActiveUser() {\r\n      const activeuser = await findActiveUser(user.user.uid);\r\n      const actUsr = await activeuser;\r\n\r\n      setActiveUser(actUsr);\r\n      // console.log(\"now\", activeuser);\r\n\r\n      const suggestedprofile = await getSuggestedProfile(actUsr[0].following);\r\n      setSuggestion(suggestedprofile);\r\n    }\r\n\r\n    if (user.user) {\r\n      getActiveUser();\r\n    }\r\n  }, [user]);\r\n\r\n  return (\r\n    <div className=\"timeline\">\r\n      {user.user && activeUser ? (\r\n        <div className=\"timeline__header\">\r\n          <Link to={`/profile/${user.user.uid}`}>\r\n            <Avatar\r\n              src={activeUser[0].profile_photo}\r\n              alt=\"profilePhoto\"\r\n              style={{ border: \"1px solid black\", marginRight: \"10px\" }}\r\n            />\r\n          </Link>\r\n\r\n          <p>\r\n            <b style={{ fontSize: \"17px\" }}>{activeUser[0].username}</b>{\" \"}\r\n            <span style={{ fontSize: \"10px\" }}>{activeUser[0].fullName}</span>\r\n          </p>\r\n        </div>\r\n      ) : (\r\n        <div className=\"timeline__header\">\r\n          <Skeleton variant=\"circle\" width={50} height={50} />\r\n          <Skeleton\r\n            variant=\"text\"\r\n            width={70}\r\n            height={30}\r\n            className=\"timeline__username\"\r\n          />\r\n        </div>\r\n      )}\r\n      <p\r\n        style={{\r\n          color: \"gray\",\r\n          fontSize: \"15px\",\r\n          marginTop: \"3vh\",\r\n        }}\r\n      >\r\n        Suggestion For You\r\n      </p>\r\n      {user.user && activeUser && suggestion ? (\r\n        suggestion.map((suggest) => (\r\n          <div className=\"timeline__suggestion\" key={suggest.postId}>\r\n            <div\r\n              className=\"timeline__suggestion__left\"\r\n              style={{ display: \"flex\", marginTop: \"15px\" }}\r\n            >\r\n              {suggest.profile_photo ? (\r\n                <Avatar\r\n                  style={{ marginRight: \"5px\", border: \"1px solid gray\" }}\r\n                  src={suggest.profile_photo}\r\n                />\r\n              ) : (\r\n                <Avatar\r\n                  style={{ marginRight: \"5px\", border: \"1px solid gray\" }}\r\n                />\r\n              )}\r\n              <p>{suggest.username}</p>\r\n            </div>\r\n            <div className=\"timeline__suggestion__left\">\r\n              <h4 style={{ color: \"blue\" }}>\r\n                <Link to={`/profile/${suggest.userId}`} style={{textDecoration:'none'}}>profile</Link>\r\n              </h4>\r\n            </div>\r\n          </div>\r\n        ))\r\n      ) : (\r\n        <div className=\"timeline__suggestion\">\r\n          <div className=\"timeline__suggestion__left\">\r\n            <Skeleton variant=\"circle\" width={40} height={40} />\r\n            <Skeleton\r\n              variant=\"text\"\r\n              width={70}\r\n              height={20}\r\n              className=\"timeline__suggestion__left__text\"\r\n            />\r\n          </div>\r\n\r\n          <Skeleton variant=\"text\" width={45} height={30} />\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Timeline;\r\n"]},"metadata":{},"sourceType":"module"}