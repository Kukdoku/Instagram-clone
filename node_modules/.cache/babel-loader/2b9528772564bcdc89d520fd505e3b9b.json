{"ast":null,"code":"import _regeneratorRuntime from\"G:/projects/photogram/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"G:/projects/photogram/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"G:/projects/photogram/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import Skeleton from\"@material-ui/lab/Skeleton\";import React,{useState,useEffect,useContext}from\"react\";import Usercontext from\"../context/user\";import{findActiveUser,getAllPosts}from\"../services/firebase\";import Post from\"./Post\";import{jsx as _jsx}from\"react/jsx-runtime\";function Dashboard(){var user=useContext(Usercontext);var _useState=useState(null),_useState2=_slicedToArray(_useState,2),posts=_useState2[0],setPosts=_useState2[1];useEffect(function(){function getAllFollowingPosts(){return _getAllFollowingPosts.apply(this,arguments);}// console.log(\"userid\", userId);\nfunction _getAllFollowingPosts(){_getAllFollowingPosts=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var activeUser,following,allfollowingPosts;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return findActiveUser(user.user.uid);case 2:activeUser=_context.sent;_context.next=5;return activeUser[0].following;case 5:following=_context.sent;_context.next=8;return getAllPosts(following);case 8:allfollowingPosts=_context.sent;// console.log(allfollowingPosts);\nsetPosts(allfollowingPosts);case 10:case\"end\":return _context.stop();}}},_callee);}));return _getAllFollowingPosts.apply(this,arguments);}if(user.user){getAllFollowingPosts();}},[]);// console.log(posts);\nreturn/*#__PURE__*/_jsx(\"div\",{className:\"dashboard\",children:posts?posts.map(function(post){return/*#__PURE__*/_jsx(Post,{postId:post.postId,uploaderId:post.user_uid},post.postId);}):/*#__PURE__*/_jsx(Post,{post:null})});}export default Dashboard;","map":{"version":3,"sources":["G:/projects/photogram/src/components/Dashboard.js"],"names":["Skeleton","React","useState","useEffect","useContext","Usercontext","findActiveUser","getAllPosts","Post","Dashboard","user","posts","setPosts","getAllFollowingPosts","uid","activeUser","following","allfollowingPosts","map","post","postId","user_uid"],"mappings":"iaAAA,MAAOA,CAAAA,QAAP,KAAqB,2BAArB,CACA,MAAOC,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,CAAqCC,UAArC,KAAuD,OAAvD,CACA,MAAOC,CAAAA,WAAP,KAAwB,iBAAxB,CACA,OAASC,cAAT,CAAyBC,WAAzB,KAA4C,sBAA5C,CACA,MAAOC,CAAAA,IAAP,KAAiB,QAAjB,C,2CAEA,QAASC,CAAAA,SAAT,EAAqB,CACnB,GAAMC,CAAAA,IAAI,CAAGN,UAAU,CAACC,WAAD,CAAvB,CACA,cAA0BH,QAAQ,CAAC,IAAD,CAAlC,wCAAOS,KAAP,eAAcC,QAAd,eAEAT,SAAS,CAAC,UAAM,SACCU,CAAAA,oBADD,uDASd;AATc,+GACd,oMAC2BP,CAAAA,cAAc,CAACI,IAAI,CAACA,IAAL,CAAUI,GAAX,CADzC,QACQC,UADR,qCAEwBA,CAAAA,UAAU,CAAC,CAAD,CAAV,CAAcC,SAFtC,QAEMA,SAFN,qCAIkCT,CAAAA,WAAW,CAACS,SAAD,CAJ7C,QAIQC,iBAJR,eAKE;AACAL,QAAQ,CAACK,iBAAD,CAAR,CANF,uDADc,uDAUd,GAAIP,IAAI,CAACA,IAAT,CAAe,CACbG,oBAAoB,GACrB,CACF,CAbQ,CAaN,EAbM,CAAT,CAcA;AACA,mBACE,YAAK,SAAS,CAAC,WAAf,UAEGF,KAAK,CACJA,KAAK,CAACO,GAAN,CAAU,SAACC,IAAD,qBAAU,KAAC,IAAD,EAAwB,MAAM,CAAEA,IAAI,CAACC,MAArC,CAA6C,UAAU,CAAED,IAAI,CAACE,QAA9D,EAAWF,IAAI,CAACC,MAAhB,CAAV,EAAV,CADI,cAGJ,KAAC,IAAD,EAAM,IAAI,CAAE,IAAZ,EALJ,EADF,CAUD,CAED,cAAeX,CAAAA,SAAf","sourcesContent":["import Skeleton from \"@material-ui/lab/Skeleton\";\r\nimport React, { useState, useEffect, useContext } from \"react\";\r\nimport Usercontext from \"../context/user\";\r\nimport { findActiveUser, getAllPosts } from \"../services/firebase\";\r\nimport Post from \"./Post\";\r\n\r\nfunction Dashboard() {\r\n  const user = useContext(Usercontext);\r\n  const [posts, setPosts] = useState(null);\r\n\r\n  useEffect(() => {\r\n    async function getAllFollowingPosts() {\r\n      const activeUser = await findActiveUser(user.user.uid);\r\n      let following = await activeUser[0].following;\r\n      // console.log(follower[0].following);\r\n      const allfollowingPosts = await getAllPosts(following);\r\n      // console.log(allfollowingPosts);\r\n      setPosts(allfollowingPosts);\r\n    }\r\n    // console.log(\"userid\", userId);\r\n    if (user.user) {\r\n      getAllFollowingPosts();\r\n    }\r\n  }, []);\r\n  // console.log(posts);\r\n  return (\r\n    <div className=\"dashboard\">\r\n    \r\n      {posts ? (\r\n        posts.map((post) => <Post key={post.postId} postId={post.postId} uploaderId={post.user_uid} />)\r\n      ) : (\r\n        <Post post={null} />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Dashboard;\r\n"]},"metadata":{},"sourceType":"module"}