{"ast":null,"code":"var _jsxFileName = \"G:\\\\projects\\\\photogram\\\\src\\\\components\\\\UpdatePic.js\",\n    _s = $RefreshSig$();\n\nimport { Button, Input } from \"@material-ui/core\";\nimport React, { useState, useContext } from \"react\";\nimport Usercontext from \"../context/user\";\nimport { db, auth, storage } from \"../firebase\";\nimport firebase from \"firebase\";\nimport { SettingsPowerRounded } from \"@material-ui/icons\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction UpdatePic({\n  uid,\n  activeUser,\n  setOpen,\n  setShow\n}) {\n  _s();\n\n  const [file, setFile] = useState(null);\n  const [progress, setProgress] = useState(0);\n  const [caption, setCaption] = useState(\"this profile picture is updated at\");\n  const user = useContext(Usercontext);\n\n  const changePic = e => {\n    e.preventDefault(); // console.log(\"hello i am working\");\n\n    const uploadTask = storage.ref(`profilePic/${file.name}`).put(file);\n    uploadTask.on(\"state_changed\", snapshot => {\n      const progress = Math.round(snapshot.bytesTransferred / snapshot.totalBytes * 100);\n      setProgress(progress);\n    }, error => {\n      // console.log(error.message);\n      alert(error.message);\n    }, () => {\n      storage.ref(\"profilePic\").child(file.name).getDownloadURL().then(url => {\n        db.collection(\"users\").doc(activeUser.docId).update({\n          profile_photo: url,\n          profilePicUpdatedAt: firebase.firestore.FieldValue.serverTimestamp()\n        });\n        db.collection(\"photos\").add({\n          timestamp: firebase.firestore.FieldValue.serverTimestamp(),\n          caption: caption,\n          username: user.user.displayName,\n          user_uid: uid,\n          fileUrl: url,\n          liked: []\n        }); //  setCaption(\"\");\n\n        setFile(null);\n        setProgress(0);\n        setOpen(false);\n        setShow(\"myPosts\");\n      });\n    });\n  };\n\n  const FileHandleChange = e => {\n    if (e.target.files[0]) {\n      setFile(e.target.files[0]);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"updatePic\",\n    children: [progress ? /*#__PURE__*/_jsxDEV(\"progress\", {\n      id: \"file\",\n      value: progress,\n      max: \"100\",\n      style: {\n        width: \"100%\"\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }, this) : null, /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: changePic,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        onChange: FileHandleChange,\n        accept: \".png, .jpg, .jpeg, .gif,.mp4,.mov\" // value={file}\n        ,\n        style: {\n          marginTop: \"10px\",\n          marginBottom: \"10px\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        type: \"submit\",\n        disabled: !file && !activeUser,\n        children: \"upload\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 5\n  }, this);\n}\n\n_s(UpdatePic, \"Uo29S0SIoZ4IUDBAPpe3NBh7P+E=\");\n\n_c = UpdatePic;\nexport default UpdatePic;\n\nvar _c;\n\n$RefreshReg$(_c, \"UpdatePic\");","map":{"version":3,"sources":["G:/projects/photogram/src/components/UpdatePic.js"],"names":["Button","Input","React","useState","useContext","Usercontext","db","auth","storage","firebase","SettingsPowerRounded","UpdatePic","uid","activeUser","setOpen","setShow","file","setFile","progress","setProgress","caption","setCaption","user","changePic","e","preventDefault","uploadTask","ref","name","put","on","snapshot","Math","round","bytesTransferred","totalBytes","error","alert","message","child","getDownloadURL","then","url","collection","doc","docId","update","profile_photo","profilePicUpdatedAt","firestore","FieldValue","serverTimestamp","add","timestamp","username","displayName","user_uid","fileUrl","liked","FileHandleChange","target","files","width","marginTop","marginBottom"],"mappings":"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","sourcesContent":["import { Button, Input } from \"@material-ui/core\";\r\nimport React, { useState, useContext } from \"react\";\r\nimport Usercontext from \"../context/user\";\r\nimport { db, auth, storage } from \"../firebase\";\r\nimport firebase from \"firebase\";\r\nimport { SettingsPowerRounded } from \"@material-ui/icons\";\r\n\r\nfunction UpdatePic({ uid, activeUser, setOpen, setShow }) {\r\n  const [file, setFile] = useState(null);\r\n  const [progress, setProgress] = useState(0);\r\n  const [caption, setCaption] = useState(\"this profile picture is updated at\");\r\n  const user = useContext(Usercontext);\r\n \r\n\r\n  const changePic = (e) => {\r\n    e.preventDefault();\r\n\r\n    // console.log(\"hello i am working\");\r\n    const uploadTask = storage.ref(`profilePic/${file.name}`).put(file);\r\n    uploadTask.on(\r\n      \"state_changed\",\r\n      (snapshot) => {\r\n        const progress = Math.round(\r\n          (snapshot.bytesTransferred / snapshot.totalBytes) * 100\r\n        );\r\n        setProgress(progress);\r\n      },\r\n      (error) => {\r\n        // console.log(error.message);\r\n        alert(error.message);\r\n      },\r\n      () => {\r\n        storage\r\n          .ref(\"profilePic\")\r\n          .child(file.name)\r\n          .getDownloadURL()\r\n          .then((url) => {\r\n            db.collection(\"users\").doc(activeUser.docId).update({\r\n              profile_photo: url,\r\n              profilePicUpdatedAt:\r\n                firebase.firestore.FieldValue.serverTimestamp(),\r\n            });\r\n            db.collection(\"photos\").add({\r\n              timestamp: firebase.firestore.FieldValue.serverTimestamp(),\r\n              caption: caption,\r\n              username: user.user.displayName,\r\n              user_uid: uid,\r\n              fileUrl: url,\r\n              liked: [],\r\n              \r\n            });\r\n            //  setCaption(\"\");\r\n            setFile(null);\r\n            setProgress(0);\r\n            setOpen(false);\r\n            setShow(\"myPosts\");\r\n\r\n          });\r\n      }\r\n    );\r\n  };\r\n\r\n  const FileHandleChange = (e) => {\r\n    if (e.target.files[0]) {\r\n      setFile(e.target.files[0]);\r\n    }\r\n  };\r\n  return (\r\n    <div className=\"updatePic\">\r\n      {progress ? (\r\n        <progress\r\n          id=\"file\"\r\n          value={progress}\r\n          max=\"100\"\r\n          style={{ width: \"100%\" }}\r\n        />\r\n      ) : null}\r\n      <form onSubmit={changePic}>\r\n        <input\r\n          type=\"file\"\r\n          onChange={FileHandleChange}\r\n          accept=\".png, .jpg, .jpeg, .gif,.mp4,.mov\"\r\n          // value={file}\r\n          style={{ marginTop: \"10px\", marginBottom: \"10px\" }}\r\n        />\r\n        <Button type=\"submit\" disabled={!file && !activeUser}>\r\n          upload\r\n        </Button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default UpdatePic;\r\n"]},"metadata":{},"sourceType":"module"}