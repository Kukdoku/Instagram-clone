{"ast":null,"code":"import _toConsumableArray from\"G:/projects/photogram/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"G:/projects/photogram/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"G:/projects/photogram/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"G:/projects/photogram/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Avatar}from\"@material-ui/core\";import React,{useState,useEffect,useContext}from\"react\";import InputEmoji from\"react-input-emoji\";import Usercontext from\"../context/user\";import notFound from\"../images/notFound.gif\";import loading from\"../images/loading.gif\";import{findActiveUser,getAllPostComment,getIndivisualPost}from\"../services/firebase\";import{Link}from\"react-router-dom\";import{Comment,Favorite,FavoriteBorder}from\"@material-ui/icons\";import{FacebookIcon,FacebookShareButton,LinkedinIcon,LinkedinShareButton,WhatsappIcon,WhatsappShareButton}from\"react-share\";import firebase from\"firebase\";import ReactPlayer from\"react-player\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function IndividualImage(){var user=useContext(Usercontext);var imageId=window.location.href.split(\"/image/\")[1];var _useState=useState(null),_useState2=_slicedToArray(_useState,2),post=_useState2[0],setPost=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),activeUser=_useState4[0],setActiveUser=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),thisImageComment=_useState6[0],setThisImageComment=_useState6[1];var _useState7=useState(true),_useState8=_slicedToArray(_useState7,2),controller=_useState8[0],setController=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),comment=_useState10[0],setComment=_useState10[1];useEffect(function(){function getMyPost(){return _getMyPost.apply(this,arguments);}function _getMyPost(){_getMyPost=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,postComments;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getIndivisualPost(imageId);case 2:response=_context.sent;_context.next=5;return getAllPostComment(imageId);case 5:postComments=_context.sent;_context.next=8;return response.onSnapshot(function(snapshot){setPost(snapshot.data());});case 8:_context.next=10;return postComments.onSnapshot(function(snapshot){setThisImageComment(snapshot.docs.map(function(doc){return{id:doc.id,data:doc.data()};}));});case 10:case\"end\":return _context.stop();}}},_callee);}));return _getMyPost.apply(this,arguments);}if(imageId!==\"\"){getMyPost();}},[imageId]);var Liked=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(t){var likeditem,index;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!t){_context2.next=8;break;}likeditem=post.liked;index=likeditem.indexOf(user.user.uid);if(index>-1){likeditem.splice(index,1);}_context2.next=6;return firebase.firestore().collection(\"photos\").doc(imageId).update({liked:likeditem});case 6:_context2.next=10;break;case 8:_context2.next=10;return firebase.firestore().collection(\"photos\").doc(imageId).update({liked:[].concat(_toConsumableArray(post.liked),[user.user.uid])});case 10:case\"end\":return _context2.stop();}}},_callee2);}));return function Liked(_x){return _ref.apply(this,arguments);};}();var PostComment=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(e){var comments;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:// e.preventDefault();\ncomments=[].concat(_toConsumableArray(thisImageComment),[{comment:comment,commentUser:user.user.username,timestamp:firebase.firestore.FieldValue.serverTimestamp(),commentUserUid:user.user.uid}]);_context3.next=3;return firebase.firestore().collection(\"photos\").doc(imageId).collection(\"comments\").add({comment:comment,commentUser:user.user.displayName,timestamp:firebase.firestore.FieldValue.serverTimestamp(),commentUserUid:user.user.uid});case 3:// setThisImageComment(comments);\nsetComment(\"\");case 4:case\"end\":return _context3.stop();}}},_callee3);}));return function PostComment(_x2){return _ref2.apply(this,arguments);};}();// console.log(thisImageComment);\nreturn controller?post&&user?/*#__PURE__*/_jsxs(\"div\",{style:{display:\"grid\",gridTemplateColumns:\"60% 40%\"},className:\"individualImage\",children:[/*#__PURE__*/_jsx(\"div\",{style:{// borderRight: \"1px solid gray\",\n// backgroundColor: \"#343835\",\n// margin: \"0 10px 0 10px\",\n},children:post.type===\"video\"?/*#__PURE__*/_jsx(ReactPlayer,{url:post.fileUrl,controls:\"true\",width:\"100%\",height:\"89vh\",style:{width:\"100%\",height:\"89vh\",objectFit:\"contain\"}}):/*#__PURE__*/_jsx(\"img\",{src:post.fileUrl,alt:\"post Image\",style:{width:\"100%\",height:\"89vh\",border:\"1px solid black\",// position: \"relative\",\nobjectFit:\"contain\"}})}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",flexDirection:\"column\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",alignItems:\"center\",justifyContent:\"space-between\",margin:\"10px\"},children:[/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",alignItems:\"center\"},children:/*#__PURE__*/_jsxs(\"div\",{style:{marginLeft:\"10px\"},children:[/*#__PURE__*/_jsx(Link,{to:\"/profile/\".concat(post.user_uid),children:/*#__PURE__*/_jsx(\"h5\",{children:post.username})}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:\"10px\",color:\"gray\"},children:post.timestamp.toDate().toDateString()})]})}),/*#__PURE__*/_jsx(Link,{to:\"/profile/\".concat(post.user_uid),style:{textDecoration:\"none\"},children:\"Profile\"})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"p\",{style:{marginBottom:\"10px\",borderBottom:\"1px solid black\",fontSize:\"14px\",padding:\"10px\"},children:[/*#__PURE__*/_jsx(\"b\",{children:\"caption: \"}),post.caption,/*#__PURE__*/_jsx(\"span\",{style:{color:\"gray\",fontSize:\"13px\",marginLeft:\"6px\"},children:post.caption===\"Update my Profile Pic at\"?post.timestamp.toDate().toDateString():null})]})}),/*#__PURE__*/_jsx(\"div\",{style:{margin:\"10px 10px 10px 15px\",overflow:\"scroll\",overflowX:\"hidden\",height:\"55vh\"},children:thisImageComment.map(function(_ref3){var data=_ref3.data,id=_ref3.id;return/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",// alignItems: \"center\",\nmargin:\"5px 7px 9px 5px \"},children:/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsxs(\"span\",{style:{color:\"#610909\",fontSize:\"15px\",fontWeight:\"bold\",marginRight:\"5px\"},children:[data?/*#__PURE__*/_jsxs(Link,{to:\"/profile/\".concat(data.commentUserUid),style:{textDecoration:\"none\"},children:[data.commentUser,\" \"]}):null,\" \",\":\"]}),/*#__PURE__*/_jsxs(\"span\",{style:{fontSize:\"15px\",color:\"#4a4747\"},children:[data?data.comment:null,\" \"]}),/*#__PURE__*/_jsx(\"span\",{style:{color:\"gray\",fontSize:\"10px\"},children:data?data.timestamp?data.timestamp.toDate().toDateString():null:null})]})},id);})}),/*#__PURE__*/_jsxs(\"div\",{style:{position:\"fixed\",bottom:\"0px\",width:\"40vw\",backgroundColor:\"#b7bdb9\",borderTop:\"2px solid gray\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",alignItems:\"center\",justifyContent:\"space-between\",margin:\"10px 10px 0 10px\"},children:[/*#__PURE__*/_jsxs(\"div\",{children:[post.liked.includes(user.user.uid)?/*#__PURE__*/_jsx(Favorite,{style:{marginLeft:\"10px\",marginRight:\"10px\",color:\"red\",cursor:\"pointer\"},onClick:function onClick(){return Liked(true);}}):/*#__PURE__*/_jsx(FavoriteBorder,{style:{marginLeft:\"10px\",marginRight:\"10px\",cursor:\"pointer\"},onClick:function onClick(){return Liked(false);}}),/*#__PURE__*/_jsx(Comment,{})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(FacebookShareButton,{url:window.location.href// quote={props.joke.setup + props.joke.punchline}\n,hashtag:\"#StupidProgrammer\",children:/*#__PURE__*/_jsx(FacebookIcon,{size:25,round:true})}),/*#__PURE__*/_jsx(WhatsappShareButton,{url:window.location.href// quote={props.joke.setup + props.joke.punchline}\n,hashtag:\"#StupidProgrammer\",children:/*#__PURE__*/_jsx(WhatsappIcon,{size:25,round:true,style:{marginLeft:\"5px\",marginRight:\"5px\"}})}),/*#__PURE__*/_jsx(LinkedinShareButton,{url:window.location.href// quote={props.joke.setup + props.joke.punchline}\n,hashtag:\"#StupidProgrammer\",children:/*#__PURE__*/_jsx(LinkedinIcon,{size:25,round:true})})]})]}),/*#__PURE__*/_jsxs(\"p\",{style:{marginLeft:\"10px\",color:\"gray\",marginTop:\"-5px\",fontSize:\"10px\"},children:[post.liked.length,\" likes \",thisImageComment.length,\" comments\"]}),/*#__PURE__*/_jsx(InputEmoji,{maxLength:200,style:{width:\"100vw\",backgroundColor:\"gray\"},value:comment,onChange:setComment,cleanOnEnter:true,onEnter:PostComment,placeholder:\"Type a message and Enter \"})]})]})]}):/*#__PURE__*/_jsx(\"div\",{style:{marginLeft:\"14vw\",marginTop:\"5vh\"},children:/*#__PURE__*/_jsx(\"img\",{src:notFound,alt:\"page Not Found Try with valid link\",style:{width:\"70vw\"}})}):/*#__PURE__*/_jsx(\"img\",{src:loading,alt:\"image is loading..\",style:{marginLeft:\"40%\",marginTop:\"20vh\",width:\"50px\"}});}export default IndividualImage;","map":{"version":3,"sources":["G:/projects/photogram/src/pages/IndividualImage.js"],"names":["Avatar","React","useState","useEffect","useContext","InputEmoji","Usercontext","notFound","loading","findActiveUser","getAllPostComment","getIndivisualPost","Link","Comment","Favorite","FavoriteBorder","FacebookIcon","FacebookShareButton","LinkedinIcon","LinkedinShareButton","WhatsappIcon","WhatsappShareButton","firebase","ReactPlayer","IndividualImage","user","imageId","window","location","href","split","post","setPost","activeUser","setActiveUser","thisImageComment","setThisImageComment","controller","setController","comment","setComment","getMyPost","response","postComments","onSnapshot","snapshot","data","docs","map","doc","id","Liked","t","likeditem","liked","index","indexOf","uid","splice","firestore","collection","update","PostComment","e","comments","commentUser","username","timestamp","FieldValue","serverTimestamp","commentUserUid","add","displayName","display","gridTemplateColumns","type","fileUrl","width","height","objectFit","border","flexDirection","alignItems","justifyContent","margin","marginLeft","user_uid","fontSize","color","toDate","toDateString","textDecoration","marginBottom","borderBottom","padding","caption","overflow","overflowX","fontWeight","marginRight","position","bottom","backgroundColor","borderTop","includes","cursor","marginTop","length"],"mappings":"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","sourcesContent":["import { Avatar } from \"@material-ui/core\";\r\nimport React, { useState, useEffect, useContext } from \"react\";\r\nimport InputEmoji from \"react-input-emoji\";\r\n\r\nimport Usercontext from \"../context/user\";\r\n\r\nimport notFound from \"../images/notFound.gif\";\r\nimport loading from \"../images/loading.gif\";\r\nimport {\r\n  findActiveUser,\r\n  getAllPostComment,\r\n  getIndivisualPost,\r\n} from \"../services/firebase\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Comment, Favorite, FavoriteBorder } from \"@material-ui/icons\";\r\nimport {\r\n  FacebookIcon,\r\n  FacebookShareButton,\r\n  LinkedinIcon,\r\n  LinkedinShareButton,\r\n  WhatsappIcon,\r\n  WhatsappShareButton,\r\n} from \"react-share\";\r\nimport firebase from \"firebase\";\r\nimport ReactPlayer from \"react-player\";\r\n\r\nfunction IndividualImage() {\r\n  const user = useContext(Usercontext);\r\n  const imageId = window.location.href.split(\"/image/\")[1];\r\n  const [post, setPost] = useState(null);\r\n  const [activeUser, setActiveUser] = useState(null);\r\n  const [thisImageComment, setThisImageComment] = useState([]);\r\n  const [controller, setController] = useState(true);\r\n\r\n  const [comment, setComment] = useState(\"\");\r\n\r\n  \r\n\r\n  useEffect(() => {\r\n    async function getMyPost() {\r\n      const response = await getIndivisualPost(imageId);\r\n      const postComments = await getAllPostComment(imageId);\r\n\r\n      await response.onSnapshot((snapshot) => {\r\n        setPost(snapshot.data());\r\n      });\r\n      await postComments.onSnapshot((snapshot) => {\r\n        setThisImageComment(\r\n          snapshot.docs.map((doc) => ({\r\n            id: doc.id,\r\n            data: doc.data(),\r\n          }))\r\n        );\r\n      });\r\n    }\r\n    if (imageId !== \"\") {\r\n      getMyPost();\r\n    }\r\n  }, [imageId]);\r\n\r\n  const Liked = async (t) => {\r\n    if (t) {\r\n      const likeditem = post.liked;\r\n      var index = likeditem.indexOf(user.user.uid);\r\n      if (index > -1) {\r\n        likeditem.splice(index, 1);\r\n      }\r\n      await firebase.firestore().collection(\"photos\").doc(imageId).update({\r\n        liked: likeditem,\r\n      });\r\n    } else {\r\n      await firebase\r\n        .firestore()\r\n        .collection(\"photos\")\r\n        .doc(imageId)\r\n        .update({\r\n          liked: [...post.liked, user.user.uid],\r\n        });\r\n    }\r\n  };\r\n\r\n  const PostComment = async (e) => {\r\n    // e.preventDefault();\r\n    const comments = [\r\n      ...thisImageComment,\r\n      {\r\n        comment: comment,\r\n        commentUser: user.user.username,\r\n        timestamp: firebase.firestore.FieldValue.serverTimestamp(),\r\n        commentUserUid: user.user.uid,\r\n      },\r\n    ];\r\n\r\n    await firebase\r\n      .firestore()\r\n      .collection(\"photos\")\r\n      .doc(imageId)\r\n      .collection(\"comments\")\r\n      .add({\r\n        comment: comment,\r\n        commentUser: user.user.displayName,\r\n        timestamp: firebase.firestore.FieldValue.serverTimestamp(),\r\n        commentUserUid: user.user.uid,\r\n      });\r\n\r\n    // setThisImageComment(comments);\r\n\r\n    setComment(\"\");\r\n  };\r\n\r\n  // console.log(thisImageComment);\r\n\r\n  return controller ? (\r\n    post && user ? (\r\n      <div\r\n        style={{ display: \"grid\", gridTemplateColumns: \"60% 40%\" }}\r\n        className=\"individualImage\"\r\n      >\r\n        <div\r\n          style={{\r\n            // borderRight: \"1px solid gray\",\r\n            // backgroundColor: \"#343835\",\r\n            // margin: \"0 10px 0 10px\",\r\n          }}\r\n        >\r\n          {post.type === \"video\" ? (\r\n            <ReactPlayer\r\n              url={post.fileUrl}\r\n              controls=\"true\"\r\n              width=\"100%\"\r\n              height=\"89vh\"\r\n              style={{\r\n                width: \"100%\",\r\n                height: \"89vh\",\r\n                objectFit: \"contain\",\r\n              }}\r\n            />\r\n          ) : (\r\n            <img\r\n              src={post.fileUrl}\r\n              alt=\"post Image\"\r\n              style={{\r\n                width: \"100%\",\r\n                height: \"89vh\",\r\n                border: \"1px solid black\",\r\n\r\n                // position: \"relative\",\r\n\r\n                objectFit: \"contain\",\r\n              }}\r\n            />\r\n          )}\r\n        </div>\r\n        <div style={{ display: \"flex\", flexDirection: \"column\" }}>\r\n          <div\r\n            style={{\r\n              display: \"flex\",\r\n              alignItems: \"center\",\r\n              justifyContent: \"space-between\",\r\n              margin: \"10px\",\r\n            }}\r\n          >\r\n            <div style={{ display: \"flex\", alignItems: \"center\" }}>\r\n              {/* <Avatar /> */}\r\n              <div style={{ marginLeft: \"10px\" }}>\r\n                <Link to={`/profile/${post.user_uid}`}>\r\n                  <h5>{post.username}</h5>\r\n                </Link>\r\n                <p style={{ fontSize: \"10px\", color: \"gray\" }}>\r\n                  {post.timestamp.toDate().toDateString()}\r\n                </p>\r\n              </div>\r\n            </div>\r\n            <Link\r\n              to={`/profile/${post.user_uid}`}\r\n              style={{ textDecoration: \"none\" }}\r\n            >\r\n              Profile\r\n            </Link>\r\n          </div>\r\n          <div>\r\n            <p\r\n              style={{\r\n                marginBottom: \"10px\",\r\n                borderBottom: \"1px solid black\",\r\n                fontSize: \"14px\",\r\n                padding: \"10px\",\r\n              }}\r\n            >\r\n              <b>caption: </b>\r\n              {post.caption}\r\n              <span\r\n                style={{ color: \"gray\", fontSize: \"13px\", marginLeft: \"6px\" }}\r\n              >\r\n                {post.caption === \"Update my Profile Pic at\"\r\n                  ? post.timestamp.toDate().toDateString()\r\n                  : null}\r\n              </span>\r\n            </p>\r\n          </div>\r\n          <div\r\n            style={{\r\n              margin: \"10px 10px 10px 15px\",\r\n              overflow: \"scroll\",\r\n              overflowX: \"hidden\",\r\n              height: \"55vh\",\r\n            }}\r\n          >\r\n            {thisImageComment.map(({ data, id }) => (\r\n              <div\r\n                style={{\r\n                  display: \"flex\",\r\n                  // alignItems: \"center\",\r\n                  margin: \"5px 7px 9px 5px \",\r\n                }}\r\n                key={id}\r\n              >\r\n                <p>\r\n                  <span\r\n                    style={{\r\n                      color: \"#610909\",\r\n                      fontSize: \"15px\",\r\n                      fontWeight: \"bold\",\r\n                      marginRight: \"5px\",\r\n                    }}\r\n                  >\r\n                    {data ? (\r\n                      <Link\r\n                        to={`/profile/${data.commentUserUid}`}\r\n                        style={{ textDecoration: \"none\" }}\r\n                      >\r\n                        {data.commentUser}{\" \"}\r\n                      </Link>\r\n                    ) : null}{\" \"}\r\n                    :\r\n                  </span>\r\n                  <span style={{ fontSize: \"15px\", color: \"#4a4747\" }}>\r\n                    {data ? data.comment : null}{\" \"}\r\n                  </span>\r\n                  <span style={{ color: \"gray\", fontSize: \"10px\" }}>\r\n                    {data\r\n                      ? data.timestamp\r\n                        ? data.timestamp.toDate().toDateString()\r\n                        : null\r\n                      : null}\r\n                  </span>\r\n                </p>\r\n              </div>\r\n            ))}\r\n          </div>\r\n\r\n          <div\r\n            style={{\r\n              position: \"fixed\",\r\n              bottom: \"0px\",\r\n              width: \"40vw\",\r\n              backgroundColor: \"#b7bdb9\",\r\n              borderTop: \"2px solid gray\",\r\n            }}\r\n          >\r\n            <div\r\n              style={{\r\n                display: \"flex\",\r\n                alignItems: \"center\",\r\n                justifyContent: \"space-between\",\r\n                margin: \"10px 10px 0 10px\",\r\n              }}\r\n            >\r\n              <div>\r\n                {post.liked.includes(user.user.uid) ? (\r\n                  <Favorite\r\n                    style={{\r\n                      marginLeft: \"10px\",\r\n                      marginRight: \"10px\",\r\n                      color: \"red\",\r\n                      cursor: \"pointer\",\r\n                    }}\r\n                    onClick={() => Liked(true)}\r\n                  />\r\n                ) : (\r\n                  <FavoriteBorder\r\n                    style={{\r\n                      marginLeft: \"10px\",\r\n                      marginRight: \"10px\",\r\n                      cursor: \"pointer\",\r\n                    }}\r\n                    onClick={() => Liked(false)}\r\n                  />\r\n                )}\r\n\r\n                <Comment />\r\n              </div>\r\n              <div>\r\n                <FacebookShareButton\r\n                  url={window.location.href}\r\n                  // quote={props.joke.setup + props.joke.punchline}\r\n                  hashtag=\"#StupidProgrammer\"\r\n                >\r\n                  <FacebookIcon size={25} round={true} />\r\n                </FacebookShareButton>\r\n                <WhatsappShareButton\r\n                  url={window.location.href}\r\n                  // quote={props.joke.setup + props.joke.punchline}\r\n                  hashtag=\"#StupidProgrammer\"\r\n                >\r\n                  <WhatsappIcon\r\n                    size={25}\r\n                    round={true}\r\n                    style={{ marginLeft: \"5px\", marginRight: \"5px\" }}\r\n                  />\r\n                </WhatsappShareButton>\r\n                <LinkedinShareButton\r\n                  url={window.location.href}\r\n                  // quote={props.joke.setup + props.joke.punchline}\r\n                  hashtag=\"#StupidProgrammer\"\r\n                >\r\n                  <LinkedinIcon size={25} round={true} />\r\n                </LinkedinShareButton>\r\n              </div>\r\n            </div>\r\n            <p\r\n              style={{\r\n                marginLeft: \"10px\",\r\n                color: \"gray\",\r\n                marginTop: \"-5px\",\r\n                fontSize: \"10px\",\r\n              }}\r\n            >\r\n              {post.liked.length} likes {thisImageComment.length} comments\r\n            </p>\r\n            <InputEmoji\r\n              maxLength={200}\r\n              style={{ width: \"100vw\", backgroundColor: \"gray\" }}\r\n              value={comment}\r\n              onChange={setComment}\r\n              cleanOnEnter\r\n              onEnter={PostComment}\r\n              placeholder=\"Type a message and Enter \"\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    ) : (\r\n      <div style={{ marginLeft: \"14vw\", marginTop: \"5vh\" }}>\r\n        <img\r\n          src={notFound}\r\n          alt=\"page Not Found Try with valid link\"\r\n          style={{ width: \"70vw\" }}\r\n        />\r\n      </div>\r\n    )\r\n  ) : (\r\n    <img\r\n      src={loading}\r\n      alt=\"image is loading..\"\r\n      style={{ marginLeft: \"40%\", marginTop: \"20vh\", width: \"50px\" }}\r\n    />\r\n  );\r\n}\r\n\r\nexport default IndividualImage;\r\n"]},"metadata":{},"sourceType":"module"}