{"ast":null,"code":"import _regeneratorRuntime from\"G:/projects/photogram/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"G:/projects/photogram/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"G:/projects/photogram/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _defineProperty from\"G:/projects/photogram/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import{Favorite,Message}from\"@material-ui/icons\";import React,{useEffect}from\"react\";import\"./postShow.css\";import{makeStyles}from\"@material-ui/core/styles\";import Modal from\"@material-ui/core/Modal\";import PostPopup from\"./PostPopup\";import{getAllPostComment}from\"../services/firebase\";import ReactPlayer from\"react-player\";import PlayCircleFilledIcon from\"@material-ui/icons/PlayCircleFilled\";import vidoeicon from'../images/vidoeicon.png';import imageIcon from'../images/imageIcon.png';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function rand(){return Math.round(Math.random()*20)-10;}function getModalStyle(){var top=50;var left=50;return{top:\"\".concat(top,\"%\"),left:\"\".concat(left,\"%\"),transform:\"translate(-\".concat(top,\"%, -\").concat(left,\"%)\")};}var useStyles=makeStyles(function(theme){return{paper:_defineProperty({position:\"absolute\",width:\"80%\",height:\"90%\",backgroundColor:theme.palette.background.paper,padding:theme.spacing(0,-5,2)},\"backgroundColor\",\" rgba(255,255,255,0.9)\")};});function PostShow(_ref){var post=_ref.post,postId=_ref.postId;var classes=useStyles();// console.log(post.type);\n// console.log(post.fileUrl);\nvar _React$useState=React.useState(getModalStyle),_React$useState2=_slicedToArray(_React$useState,1),modalStyle=_React$useState2[0];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),open=_React$useState4[0],setOpen=_React$useState4[1];var _React$useState5=React.useState([]),_React$useState6=_slicedToArray(_React$useState5,2),postComment=_React$useState6[0],setPostComment=_React$useState6[1];var handleOpen=function handleOpen(){setOpen(true);};var handleClose=function handleClose(){setOpen(false);};useEffect(function(){function getComment(){return _getComment.apply(this,arguments);}function _getComment(){_getComment=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getAllPostComment(postId);case 2:result=_context.sent;_context.next=5;return result.onSnapshot(function(snapshot){setPostComment(snapshot.docs.map(function(doc){return{id:doc.id,data:doc.data()};}));});case 5:case\"end\":return _context.stop();}}},_callee);}));return _getComment.apply(this,arguments);}if(postId!==\"\"){getComment();}},[postId]);var body=/*#__PURE__*/_jsx(\"div\",{style:modalStyle,className:classes.paper,children:/*#__PURE__*/_jsx(PostPopup,{post:post,postId:postId})});return/*#__PURE__*/_jsxs(\"div\",{className:\"universal__image\",children:[/*#__PURE__*/_jsx(Modal,{open:open,onClose:handleClose,\"aria-labelledby\":\"simple-modal-title\",\"aria-describedby\":\"simple-modal-description\",children:body}),post.type===\"video\"?/*#__PURE__*/_jsx(ReactPlayer,{url:post.fileUrl,alt:\"video\",className:\"inner-image portrait\",onClick:handleOpen,width:\"300px\",height:\"300px\"}):/*#__PURE__*/_jsx(\"img\",{src:post.fileUrl,alt:\"image\",className:\"inner-image portrait\",onClick:handleOpen}),/*#__PURE__*/_jsx(\"div\",{className:\"middle\",children:/*#__PURE__*/_jsxs(\"p\",{style:{display:\"flex\",alignItems:\"center\"},children:[post.liked.length,/*#__PURE__*/_jsx(Favorite,{}),\" \",postComment.length,/*#__PURE__*/_jsx(Message,{})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"corner\",children:post.type===\"video\"?/*#__PURE__*/_jsx(\"img\",{src:vidoeicon,alt:\"video\",className:\"icon\"}):/*#__PURE__*/_jsx(\"img\",{src:imageIcon,alt:\"image\",className:\"icon\"})})]},post.postId);}export default PostShow;","map":{"version":3,"sources":["G:/projects/photogram/src/components/PostShow.js"],"names":["Favorite","Message","React","useEffect","makeStyles","Modal","PostPopup","getAllPostComment","ReactPlayer","PlayCircleFilledIcon","vidoeicon","imageIcon","rand","Math","round","random","getModalStyle","top","left","transform","useStyles","theme","paper","position","width","height","backgroundColor","palette","background","padding","spacing","PostShow","post","postId","classes","useState","modalStyle","open","setOpen","postComment","setPostComment","handleOpen","handleClose","getComment","result","onSnapshot","snapshot","docs","map","doc","id","data","body","type","fileUrl","display","alignItems","liked","length"],"mappings":"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","sourcesContent":["import { Favorite, Message } from \"@material-ui/icons\";\r\nimport React, { useEffect } from \"react\";\r\nimport \"./postShow.css\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Modal from \"@material-ui/core/Modal\";\r\nimport PostPopup from \"./PostPopup\";\r\nimport { getAllPostComment } from \"../services/firebase\";\r\nimport ReactPlayer from \"react-player\";\r\nimport PlayCircleFilledIcon from \"@material-ui/icons/PlayCircleFilled\";\r\nimport vidoeicon from '../images/vidoeicon.png'\r\nimport imageIcon from '../images/imageIcon.png'\r\n\r\nfunction rand() {\r\n  return Math.round(Math.random() * 20) - 10;\r\n}\r\n\r\nfunction getModalStyle() {\r\n  const top = 50;\r\n  const left = 50;\r\n\r\n  return {\r\n    top: `${top}%`,\r\n    left: `${left}%`,\r\n    transform: `translate(-${top}%, -${left}%)`,\r\n  };\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  paper: {\r\n    position: \"absolute\",\r\n    width: \"80%\",\r\n    height: \"90%\",\r\n    backgroundColor: theme.palette.background.paper,\r\n\r\n    padding: theme.spacing(0, -5, 2),\r\n    backgroundColor: \" rgba(255,255,255,0.9)\",\r\n  },\r\n}));\r\n\r\nfunction PostShow({ post, postId }) {\r\n  const classes = useStyles();\r\n\r\n  // console.log(post.type);\r\n  // console.log(post.fileUrl);\r\n\r\n  const [modalStyle] = React.useState(getModalStyle);\r\n  const [open, setOpen] = React.useState(false);\r\n  const [postComment, setPostComment] = React.useState([]);\r\n\r\n  const handleOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  useEffect(() => {\r\n    async function getComment() {\r\n      const result = await getAllPostComment(postId);\r\n      await result.onSnapshot((snapshot) => {\r\n        setPostComment(\r\n          snapshot.docs.map((doc) => ({\r\n            id: doc.id,\r\n            data: doc.data(),\r\n          }))\r\n        );\r\n      });\r\n    }\r\n\r\n    if (postId !== \"\") {\r\n      getComment();\r\n    }\r\n  }, [postId]);\r\n\r\n  const body = (\r\n    <div style={modalStyle} className={classes.paper}>\r\n      <PostPopup post={post} postId={postId} />\r\n    </div>\r\n  );\r\n  return (\r\n    <div className=\"universal__image\" key={post.postId}>\r\n      <Modal\r\n        open={open}\r\n        onClose={handleClose}\r\n        aria-labelledby=\"simple-modal-title\"\r\n        aria-describedby=\"simple-modal-description\"\r\n      >\r\n        {body}\r\n      </Modal>\r\n      {post.type === \"video\" ? (\r\n        <ReactPlayer\r\n          url={post.fileUrl}\r\n          alt=\"video\"\r\n          className=\"inner-image portrait\"\r\n          onClick={handleOpen}\r\n          width=\"300px\"\r\n          height=\"300px\"\r\n        />\r\n      ) : (\r\n        <img\r\n          src={post.fileUrl}\r\n          alt=\"image\"\r\n          className=\"inner-image portrait\"\r\n          onClick={handleOpen}\r\n        />\r\n      )}\r\n      <div className=\"middle\">\r\n        <p style={{ display: \"flex\", alignItems: \"center\" }}>\r\n          {post.liked.length}\r\n          <Favorite /> {postComment.length}\r\n          <Message />\r\n        </p>\r\n      </div>\r\n\r\n      <div className=\"corner\">\r\n        {post.type === \"video\" ? (\r\n          <img src={vidoeicon} alt=\"video\" className=\"icon\"/>\r\n        ) : (\r\n          <img src={imageIcon} alt=\"image\" className=\"icon\"/>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PostShow;\r\n"]},"metadata":{},"sourceType":"module"}