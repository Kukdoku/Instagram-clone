{"ast":null,"code":"import _regeneratorRuntime from\"G:/projects/photogram/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"G:/projects/photogram/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"G:/projects/photogram/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _defineProperty from\"G:/projects/photogram/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import{Favorite,Message}from\"@material-ui/icons\";import React,{useEffect}from\"react\";import\"./postShow.css\";import{makeStyles}from\"@material-ui/core/styles\";import Modal from\"@material-ui/core/Modal\";import PostPopup from\"./PostPopup\";import{getAllPostComment}from\"../services/firebase\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function rand(){return Math.round(Math.random()*20)-10;}function getModalStyle(){var top=50;var left=50;return{top:\"\".concat(top,\"%\"),left:\"\".concat(left,\"%\"),transform:\"translate(-\".concat(top,\"%, -\").concat(left,\"%)\")};}var useStyles=makeStyles(function(theme){return{paper:_defineProperty({position:\"absolute\",width:\"80%\",height:\"90%\",backgroundColor:theme.palette.background.paper,border:\"2px solid #000\",boxShadow:theme.shadows[5],padding:theme.spacing(0,-5,2)},\"backgroundColor\",\" rgba(255,255,255,0.9)\")};});function PostShow(_ref){var post=_ref.post,postId=_ref.postId;var classes=useStyles();var _React$useState=React.useState(getModalStyle),_React$useState2=_slicedToArray(_React$useState,1),modalStyle=_React$useState2[0];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),open=_React$useState4[0],setOpen=_React$useState4[1];var _React$useState5=React.useState([]),_React$useState6=_slicedToArray(_React$useState5,2),postComment=_React$useState6[0],setPostComment=_React$useState6[1];var handleOpen=function handleOpen(){setOpen(true);};var handleClose=function handleClose(){setOpen(false);};useEffect(function(){function getComment(){return _getComment.apply(this,arguments);}function _getComment(){_getComment=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getAllPostComment(postId);case 2:result=_context.sent;_context.next=5;return result.onSnapshot(function(snapshot){setPostComment(snapshot.docs.map(function(doc){return{id:doc.id,data:doc.data()};}));});case 5:case\"end\":return _context.stop();}}},_callee);}));return _getComment.apply(this,arguments);}if(postId!==''){getComment();}},[postId]);var body=/*#__PURE__*/_jsx(\"div\",{style:modalStyle,className:classes.paper,children:/*#__PURE__*/_jsx(PostPopup,{post:post,postId:postId})});return/*#__PURE__*/_jsxs(\"div\",{className:\"universal__image\",children:[/*#__PURE__*/_jsx(Modal,{open:open,onClose:handleClose,\"aria-labelledby\":\"simple-modal-title\",\"aria-describedby\":\"simple-modal-description\",children:body}),/*#__PURE__*/_jsx(\"img\",{src:post.fileUrl,alt:\"image\",className:\"inner-image portrait\",onClick:handleOpen}),/*#__PURE__*/_jsx(\"div\",{className:\"middle\",children:/*#__PURE__*/_jsxs(\"p\",{style:{display:\"flex\",alignItems:\"center\"},children:[post.liked.length,/*#__PURE__*/_jsx(Favorite,{}),\" \",postComment.length,/*#__PURE__*/_jsx(Message,{})]})})]},post.postId);}export default PostShow;","map":{"version":3,"sources":["G:/projects/photogram/src/components/PostShow.js"],"names":["Favorite","Message","React","useEffect","makeStyles","Modal","PostPopup","getAllPostComment","rand","Math","round","random","getModalStyle","top","left","transform","useStyles","theme","paper","position","width","height","backgroundColor","palette","background","border","boxShadow","shadows","padding","spacing","PostShow","post","postId","classes","useState","modalStyle","open","setOpen","postComment","setPostComment","handleOpen","handleClose","getComment","result","onSnapshot","snapshot","docs","map","doc","id","data","body","fileUrl","display","alignItems","liked","length"],"mappings":"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","sourcesContent":["import { Favorite, Message } from \"@material-ui/icons\";\r\nimport React,{useEffect} from \"react\";\r\nimport \"./postShow.css\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Modal from \"@material-ui/core/Modal\";\r\nimport PostPopup from \"./PostPopup\";\r\nimport { getAllPostComment } from \"../services/firebase\";\r\n\r\nfunction rand() {\r\n  return Math.round(Math.random() * 20) - 10;\r\n}\r\n\r\nfunction getModalStyle() {\r\n  const top = 50;\r\n  const left = 50;\r\n\r\n  return {\r\n    top: `${top}%`,\r\n    left: `${left}%`,\r\n    transform: `translate(-${top}%, -${left}%)`,\r\n  };\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  paper: {\r\n    position: \"absolute\",\r\n    width: \"80%\",\r\n    height: \"90%\",\r\n    backgroundColor: theme.palette.background.paper,\r\n    border: \"2px solid #000\",\r\n    boxShadow: theme.shadows[5],\r\n    padding: theme.spacing(0, -5, 2),\r\n    backgroundColor: \" rgba(255,255,255,0.9)\",\r\n  },\r\n}));\r\n\r\nfunction PostShow({ post ,postId}) {\r\n  const classes = useStyles();\r\n\r\n  const [modalStyle] = React.useState(getModalStyle);\r\n  const [open, setOpen] = React.useState(false);\r\n  const [postComment, setPostComment] = React.useState([])\r\n\r\n  const handleOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  \r\n  useEffect(() =>{\r\n    async function getComment(){\r\n      const result = await getAllPostComment(postId)\r\n       await result.onSnapshot((snapshot) => {\r\n        setPostComment(\r\n          snapshot.docs.map((doc) => ({\r\n            id: doc.id,\r\n            data: doc.data(),\r\n          }))\r\n        );\r\n      });\r\n    }\r\n    \r\n    if(postId !== ''){\r\n      getComment()\r\n    }\r\n  },[postId])\r\n\r\n  const body = (\r\n    <div style={modalStyle} className={classes.paper}>\r\n      <PostPopup post={post} postId={postId} />\r\n    </div>\r\n  );\r\n  return (\r\n    <div className=\"universal__image\" key={post.postId}>\r\n      <Modal\r\n        open={open}\r\n        onClose={handleClose}\r\n        aria-labelledby=\"simple-modal-title\"\r\n        aria-describedby=\"simple-modal-description\"\r\n      >\r\n        {body}\r\n      </Modal>\r\n      <img\r\n        src={post.fileUrl}\r\n        alt=\"image\"\r\n        className=\"inner-image portrait\"\r\n        onClick={handleOpen}\r\n      />\r\n      <div className=\"middle\">\r\n        <p style={{ display: \"flex\", alignItems: \"center\" }}>\r\n          {post.liked.length}\r\n          <Favorite /> {postComment.length}<Message />\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PostShow;\r\n"]},"metadata":{},"sourceType":"module"}