{"ast":null,"code":"import _slicedToArray from\"G:/projects/photogram/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useContext}from\"react\";import{auth}from\"../firebase\";import firebase from\"firebase\";function useAuthListener(){var _useState=useState(JSON.parse(localStorage.getItem(\"authUser\"))),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];useEffect(function(){var listener=firebase.auth().onAuthStateChanged(function(authUser){if(authUser){localStorage.setItem(\"authUser\",JSON.stringify(authUser));setUser(authUser);}else{localStorage.removeItem(\"authUser\");setUser(null);}});return function(){return listener();};},[firebase]);return{user:user};}export default useAuthListener;","map":{"version":3,"sources":["G:/projects/photogram/src/hooks/use-auth-listener.js"],"names":["React","useState","useEffect","useContext","auth","firebase","useAuthListener","JSON","parse","localStorage","getItem","user","setUser","listener","onAuthStateChanged","authUser","setItem","stringify","removeItem"],"mappings":"4IAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,CAAqCC,UAArC,KAAuD,OAAvD,CACA,OAASC,IAAT,KAAqB,aAArB,CACA,MAAOC,CAAAA,QAAP,KAAqB,UAArB,CAEA,QAASC,CAAAA,eAAT,EAA2B,CACzB,cAAwBL,QAAQ,CAC9BM,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAX,CAD8B,CAAhC,wCAAOC,IAAP,eAAaC,OAAb,eAIAV,SAAS,CAAC,UAAM,CACd,GAAMW,CAAAA,QAAQ,CAAGR,QAAQ,CAACD,IAAT,GAAgBU,kBAAhB,CAAmC,SAACC,QAAD,CAAc,CAChE,GAAIA,QAAJ,CAAc,CACZN,YAAY,CAACO,OAAb,CAAqB,UAArB,CAAiCT,IAAI,CAACU,SAAL,CAAeF,QAAf,CAAjC,EACAH,OAAO,CAACG,QAAD,CAAP,CACD,CAHD,IAGO,CACLN,YAAY,CAACS,UAAb,CAAwB,UAAxB,EACAN,OAAO,CAAC,IAAD,CAAP,CACD,CACF,CARgB,CAAjB,CASA,MAAO,kBAAMC,CAAAA,QAAQ,EAAd,EAAP,CACD,CAXQ,CAWN,CAACR,QAAD,CAXM,CAAT,CAaA,MAAO,CAAEM,IAAI,CAAJA,IAAF,CAAP,CACD,CAED,cAAeL,CAAAA,eAAf","sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\r\nimport { auth } from \"../firebase\";\r\nimport firebase from \"firebase\";\r\n\r\nfunction useAuthListener() {\r\n  const [user, setUser] = useState(\r\n    JSON.parse(localStorage.getItem(\"authUser\"))\r\n  );\r\n\r\n  useEffect(() => {\r\n    const listener = firebase.auth().onAuthStateChanged((authUser) => {\r\n      if (authUser) {\r\n        localStorage.setItem(\"authUser\", JSON.stringify(authUser));\r\n        setUser(authUser);\r\n      } else {\r\n        localStorage.removeItem(\"authUser\");\r\n        setUser(null);\r\n      }\r\n    });\r\n    return () => listener();\r\n  }, [firebase]);\r\n\r\n  return { user };\r\n}\r\n\r\nexport default useAuthListener;\r\n"]},"metadata":{},"sourceType":"module"}