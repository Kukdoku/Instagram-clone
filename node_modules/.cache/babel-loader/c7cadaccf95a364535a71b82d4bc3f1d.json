{"ast":null,"code":"var _jsxFileName = \"G:\\\\projects\\\\photogram\\\\src\\\\components\\\\PostPopup.js\",\n    _s = $RefreshSig$();\n\nimport { Avatar } from \"@material-ui/core\";\nimport React, { useState, useEffect, useContext } from \"react\";\nimport InputEmoji from \"react-input-emoji\";\nimport { Link } from \"react-router-dom\";\nimport Usercontext from \"../context/user\";\nimport { getAllPostComment, getIndivisualPost } from \"../services/firebase\";\nimport firebase from \"firebase\";\nimport { Comment, Favorite, FavoriteBorder, OpenInNew } from \"@material-ui/icons\";\nimport { FacebookIcon, FacebookShareButton, LinkedinIcon, LinkedinShareButton, WhatsappIcon, WhatsappShareButton } from \"react-share\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction PostPopup({\n  postId\n}) {\n  _s();\n\n  const user = useContext(Usercontext);\n  const [comment, setComment] = useState(\"\");\n  const [postComment, setPostComment] = useState([]);\n  const [post, setPost] = useState(null);\n  useEffect(() => {\n    async function getMyPost() {\n      const postComments = await getAllPostComment(postId);\n      const response = await getIndivisualPost(postId);\n      await response.onSnapshot(snapshot => {\n        setPost(snapshot.data());\n      });\n      await postComments.onSnapshot(snapshot => {\n        setPostComment(snapshot.docs.map(doc => ({\n          id: doc.id,\n          data: doc.data()\n        })));\n      });\n    }\n\n    if (postId !== \"\") {\n      getMyPost();\n    }\n  }, [postId]);\n\n  const Liked = async t => {\n    if (t) {\n      const likeditem = post.liked;\n      var index = likeditem.indexOf(user.user.uid);\n\n      if (index > -1) {\n        likeditem.splice(index, 1);\n      }\n\n      await firebase.firestore().collection(\"photos\").doc(postId).update({\n        liked: likeditem\n      });\n    } else {\n      await firebase.firestore().collection(\"photos\").doc(postId).update({\n        liked: [...post.liked, user.user.uid]\n      });\n    }\n  };\n\n  const PostComment = async e => {\n    // e.preventDefault();\n    const comments = [...postComment, {\n      comment: comment,\n      commentUser: user.user.username,\n      timestamp: firebase.firestore.FieldValue.serverTimestamp(),\n      commentUserUid: user.user.uid\n    }];\n    await firebase.firestore().collection(\"photos\").doc(postId).collection(\"comments\").add({\n      comment: comment,\n      commentUser: user.user.displayName,\n      timestamp: firebase.firestore.FieldValue.serverTimestamp(),\n      commentUserUid: user.user.uid\n    }); // setThisImageComment(comments);\n\n    setComment(\"\");\n  }; // if (post && user) {\n  //   if (post.liked.includes(user.user.uid)) {\n  //     setLike(true);\n  //   } else {\n  //     setLike(false);\n  //   }\n  // }\n\n\n  return post ? /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      display: \"grid\",\n      gridTemplateColumns: \"60% 40%\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        borderRight: \"1px solid gray\",\n        backgroundColor: \"#343835\"\n      },\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        src: post.fileUrl,\n        alt: \"post Image\",\n        style: {\n          width: \"100%\",\n          height: \"89vh\",\n          border: \"1px solid black\",\n          // position: \"relative\",\n          objectFit: \"contain\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: \"flex\",\n          alignItems: \"center\",\n          justifyContent: \"space-between\",\n          margin: \"10px\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: \"flex\",\n            alignItems: \"center\"\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginLeft: \"10px\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(Link, {\n              to: `/profile/${post.user_uid}`,\n              style: {\n                textDecoration: \"none\"\n              },\n              children: /*#__PURE__*/_jsxDEV(\"h5\", {\n                children: post.username\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 146,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 142,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                fontSize: \"10px\",\n                color: \"gray\"\n              },\n              children: post.timestamp.toDate().toDateString()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 149,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: `/profile/${post.user_uid}`,\n          style: {\n            textDecoration: \"none\"\n          },\n          children: \"Profile\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            borderBottom: \"1px solid black\",\n            fontSize: \"14px\",\n            paddingLeft: \"10px\",\n            paddingBottom: \"10px\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"b\", {\n            children: \"caption: \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 13\n          }, this), post.caption, /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              color: \"gray\",\n              fontSize: \"13px\",\n              marginLeft: \"6px\"\n            },\n            children: post.caption === \"Update my Profile Pic at\" ? post.timestamp.toDate().toDateString() : null\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            margin: \"10px 0px 0px 10px\",\n            overflow: \"scroll\",\n            overflowX: \"hidden\",\n            height: \"55vh\"\n          },\n          children: postComment.map(({\n            data,\n            id\n          }) => /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: \"flex\",\n              // alignItems: \"center\",\n              margin: \"5px 7px 9px 5px \"\n            },\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  color: \"#610909\",\n                  fontSize: \"15px\",\n                  fontWeight: \"bold\",\n                  marginRight: \"5px\"\n                },\n                children: /*#__PURE__*/_jsxDEV(Link, {\n                  to: `/profile/${data.commentUserUid}`,\n                  style: {\n                    textDecoration: \"none\"\n                  },\n                  children: [data ? data.commentUser : null, \" :\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 208,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 200,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  fontSize: \"15px\",\n                  color: \"#4a4747\"\n                },\n                children: [data ? data.comment : null, \" \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 215,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  color: \"gray\",\n                  fontSize: \"10px\"\n                },\n                children: data ? data.timestamp ? data.timestamp.toDate().toDateString() : null : null\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 218,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 199,\n              columnNumber: 17\n            }, this)\n          }, id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          position: \"fixed\",\n          bottom: \"0px\",\n          width: \"32vw\",\n          backgroundColor: \"#c7c7c7\",\n          borderTop: \"2px solid gray\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [\" \", user ? /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: \"flex\",\n              alignItems: \"center\",\n              justifyContent: \"space-between\",\n              margin: \"10px 10px 0 10px\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [post.liked.includes(user.user.uid) ? /*#__PURE__*/_jsxDEV(Favorite, {\n                style: {\n                  marginLeft: \"10px\",\n                  marginRight: \"10px\",\n                  color: \"red\",\n                  cursor: \"pointer\"\n                },\n                onClick: () => Liked(true)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 253,\n                columnNumber: 21\n              }, this) : /*#__PURE__*/_jsxDEV(FavoriteBorder, {\n                style: {\n                  marginLeft: \"10px\",\n                  marginRight: \"10px\",\n                  cursor: \"pointer\"\n                },\n                onClick: () => Liked(false)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 263,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(Comment, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 273,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Link, {\n                style: {\n                  marginLeft: \"10px\"\n                },\n                to: `/image/${postId}`,\n                children: /*#__PURE__*/_jsxDEV(OpenInNew, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 275,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 274,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 251,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(FacebookShareButton, {\n                url: `${window.location.href}image/${postId}` // quote={props.joke.setup + props.joke.punchline}\n                ,\n                hashtag: \"#StupidProgrammer\",\n                children: /*#__PURE__*/_jsxDEV(FacebookIcon, {\n                  size: 25,\n                  round: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 284,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 279,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(WhatsappShareButton, {\n                url: `${window.location.href}image/${postId}` // quote={props.joke.setup + props.joke.punchline}\n                ,\n                hashtag: \"#StupidProgrammer\",\n                children: /*#__PURE__*/_jsxDEV(WhatsappIcon, {\n                  size: 25,\n                  round: true,\n                  style: {\n                    marginLeft: \"5px\",\n                    marginRight: \"5px\"\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 291,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 286,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(LinkedinShareButton, {\n                url: `${window.location.href}image/${postId}` // quote={props.joke.setup + props.joke.punchline}\n                ,\n                hashtag: \"#StupidProgrammer\",\n                children: /*#__PURE__*/_jsxDEV(LinkedinIcon, {\n                  size: 25,\n                  round: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 302,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 297,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 278,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 243,\n            columnNumber: 15\n          }, this) : null, /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              marginLeft: \"10px\",\n              color: \"gray\",\n              marginTop: \"-5px\",\n              fontSize: \"10px\"\n            },\n            children: [post.liked.length, \" likes \", postComment.length, \" comments\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 307,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(InputEmoji, {\n          maxLength: 200,\n          style: {\n            width: \"100vw\",\n            backgroundColor: \"gray\"\n          },\n          value: comment,\n          onChange: setComment,\n          cleanOnEnter: true,\n          onEnter: PostComment,\n          placeholder: \"Type a message\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 318,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 112,\n    columnNumber: 5\n  }, this) : null;\n}\n\n_s(PostPopup, \"TuSPDyL+Tf+wAInqZYJQCdlfWCo=\");\n\n_c = PostPopup;\nexport default PostPopup;\n\nvar _c;\n\n$RefreshReg$(_c, \"PostPopup\");","map":{"version":3,"sources":["G:/projects/photogram/src/components/PostPopup.js"],"names":["Avatar","React","useState","useEffect","useContext","InputEmoji","Link","Usercontext","getAllPostComment","getIndivisualPost","firebase","Comment","Favorite","FavoriteBorder","OpenInNew","FacebookIcon","FacebookShareButton","LinkedinIcon","LinkedinShareButton","WhatsappIcon","WhatsappShareButton","PostPopup","postId","user","comment","setComment","postComment","setPostComment","post","setPost","getMyPost","postComments","response","onSnapshot","snapshot","data","docs","map","doc","id","Liked","t","likeditem","liked","index","indexOf","uid","splice","firestore","collection","update","PostComment","e","comments","commentUser","username","timestamp","FieldValue","serverTimestamp","commentUserUid","add","displayName","display","gridTemplateColumns","borderRight","backgroundColor","fileUrl","width","height","border","objectFit","alignItems","justifyContent","margin","marginLeft","user_uid","textDecoration","fontSize","color","toDate","toDateString","borderBottom","paddingLeft","paddingBottom","caption","overflow","overflowX","fontWeight","marginRight","position","bottom","borderTop","includes","cursor","window","location","href","marginTop","length"],"mappings":"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","sourcesContent":["import { Avatar } from \"@material-ui/core\";\r\nimport React, { useState, useEffect, useContext } from \"react\";\r\nimport InputEmoji from \"react-input-emoji\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Usercontext from \"../context/user\";\r\nimport { getAllPostComment, getIndivisualPost } from \"../services/firebase\";\r\nimport firebase from \"firebase\";\r\nimport {\r\n  Comment,\r\n  Favorite,\r\n  FavoriteBorder,\r\n  OpenInNew,\r\n} from \"@material-ui/icons\";\r\nimport {\r\n  FacebookIcon,\r\n  FacebookShareButton,\r\n  LinkedinIcon,\r\n  LinkedinShareButton,\r\n  WhatsappIcon,\r\n  WhatsappShareButton,\r\n} from \"react-share\";\r\n\r\nfunction PostPopup({ postId }) {\r\n  const user = useContext(Usercontext);\r\n\r\n  const [comment, setComment] = useState(\"\");\r\n  const [postComment, setPostComment] = useState([]);\r\n  const [post, setPost] = useState(null);\r\n\r\n  useEffect(() => {\r\n    async function getMyPost() {\r\n      const postComments = await getAllPostComment(postId);\r\n      const response = await getIndivisualPost(postId);\r\n\r\n      await response.onSnapshot((snapshot) => {\r\n        setPost(snapshot.data());\r\n      });\r\n\r\n      await postComments.onSnapshot((snapshot) => {\r\n        setPostComment(\r\n          snapshot.docs.map((doc) => ({\r\n            id: doc.id,\r\n            data: doc.data(),\r\n          }))\r\n        );\r\n      });\r\n    }\r\n    if (postId !== \"\") {\r\n      getMyPost();\r\n    }\r\n  }, [postId]);\r\n\r\n  const Liked = async (t) => {\r\n    if (t) {\r\n      const likeditem = post.liked;\r\n      var index = likeditem.indexOf(user.user.uid);\r\n      if (index > -1) {\r\n        likeditem.splice(index, 1);\r\n      }\r\n      await firebase.firestore().collection(\"photos\").doc(postId).update({\r\n        liked: likeditem,\r\n      });\r\n    } else {\r\n      await firebase\r\n        .firestore()\r\n        .collection(\"photos\")\r\n        .doc(postId)\r\n        .update({\r\n          liked: [...post.liked, user.user.uid],\r\n        });\r\n    }\r\n  };\r\n\r\n  const PostComment = async (e) => {\r\n    // e.preventDefault();\r\n    const comments = [\r\n      ...postComment,\r\n      {\r\n        comment: comment,\r\n        commentUser: user.user.username,\r\n        timestamp: firebase.firestore.FieldValue.serverTimestamp(),\r\n        commentUserUid: user.user.uid,\r\n      },\r\n    ];\r\n\r\n    await firebase\r\n      .firestore()\r\n      .collection(\"photos\")\r\n      .doc(postId)\r\n      .collection(\"comments\")\r\n      .add({\r\n        comment: comment,\r\n        commentUser: user.user.displayName,\r\n        timestamp: firebase.firestore.FieldValue.serverTimestamp(),\r\n        commentUserUid: user.user.uid,\r\n      });\r\n\r\n    // setThisImageComment(comments);\r\n\r\n    setComment(\"\");\r\n  };\r\n\r\n  // if (post && user) {\r\n  //   if (post.liked.includes(user.user.uid)) {\r\n  //     setLike(true);\r\n  //   } else {\r\n  //     setLike(false);\r\n  //   }\r\n  // }\r\n\r\n  return post ? (\r\n    <div style={{ display: \"grid\", gridTemplateColumns: \"60% 40%\" }}>\r\n      <div\r\n        style={{ borderRight: \"1px solid gray\", backgroundColor: \"#343835\" }}\r\n      >\r\n        <img\r\n          src={post.fileUrl}\r\n          alt=\"post Image\"\r\n          style={{\r\n            width: \"100%\",\r\n            height: \"89vh\",\r\n            border: \"1px solid black\",\r\n\r\n            // position: \"relative\",\r\n\r\n            objectFit: \"contain\",\r\n          }}\r\n        />\r\n      </div>\r\n      <div>\r\n        <div\r\n          style={{\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n            justifyContent: \"space-between\",\r\n            margin: \"10px\",\r\n          }}\r\n        >\r\n          <div style={{ display: \"flex\", alignItems: \"center\" }}>\r\n            {/* <Avatar /> */}\r\n            <div style={{ marginLeft: \"10px\" }}>\r\n              <Link\r\n                to={`/profile/${post.user_uid}`}\r\n                style={{ textDecoration: \"none\" }}\r\n              >\r\n                <h5>{post.username}</h5>\r\n              </Link>\r\n\r\n              <p style={{ fontSize: \"10px\", color: \"gray\" }}>\r\n                {post.timestamp.toDate().toDateString()}\r\n              </p>\r\n            </div>\r\n          </div>\r\n          <Link\r\n            to={`/profile/${post.user_uid}`}\r\n            style={{ textDecoration: \"none\" }}\r\n          >\r\n            Profile\r\n          </Link>\r\n        </div>\r\n        <div>\r\n          <p\r\n            style={{\r\n              borderBottom: \"1px solid black\",\r\n              fontSize: \"14px\",\r\n              paddingLeft: \"10px\",\r\n              paddingBottom: \"10px\",\r\n            }}\r\n          >\r\n            <b>caption: </b>\r\n            {post.caption}\r\n            <span\r\n              style={{ color: \"gray\", fontSize: \"13px\", marginLeft: \"6px\" }}\r\n            >\r\n              {post.caption === \"Update my Profile Pic at\"\r\n                ? post.timestamp.toDate().toDateString()\r\n                : null}\r\n            </span>\r\n          </p>\r\n        </div>\r\n        <div>\r\n          <div\r\n            style={{\r\n              margin: \"10px 0px 0px 10px\",\r\n              overflow: \"scroll\",\r\n              overflowX: \"hidden\",\r\n              height: \"55vh\",\r\n            }}\r\n          >\r\n            {postComment.map(({ data, id }) => (\r\n              <div\r\n                style={{\r\n                  display: \"flex\",\r\n                  // alignItems: \"center\",\r\n                  margin: \"5px 7px 9px 5px \",\r\n                }}\r\n                key={id}\r\n              >\r\n                <p>\r\n                  <span\r\n                    style={{\r\n                      color: \"#610909\",\r\n                      fontSize: \"15px\",\r\n                      fontWeight: \"bold\",\r\n                      marginRight: \"5px\",\r\n                    }}\r\n                  >\r\n                    <Link\r\n                      to={`/profile/${data.commentUserUid}`}\r\n                      style={{ textDecoration: \"none\" }}\r\n                    >\r\n                      {data ? data.commentUser : null} :\r\n                    </Link>\r\n                  </span>\r\n                  <span style={{ fontSize: \"15px\", color: \"#4a4747\" }}>\r\n                    {data ? data.comment : null}{\" \"}\r\n                  </span>\r\n                  <span style={{ color: \"gray\", fontSize: \"10px\" }}>\r\n                    {data\r\n                      ? data.timestamp\r\n                        ? data.timestamp.toDate().toDateString()\r\n                        : null\r\n                      : null}\r\n                  </span>\r\n                </p>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        <div\r\n          style={{\r\n            position: \"fixed\",\r\n            bottom: \"0px\",\r\n            width: \"32vw\",\r\n            backgroundColor: \"#c7c7c7\",\r\n            borderTop: \"2px solid gray\",\r\n          }}\r\n        >\r\n          <div>\r\n            {\" \"}\r\n            {user ? (\r\n              <div\r\n                style={{\r\n                  display: \"flex\",\r\n                  alignItems: \"center\",\r\n                  justifyContent: \"space-between\",\r\n                  margin: \"10px 10px 0 10px\",\r\n                }}\r\n              >\r\n                <div>\r\n                  {post.liked.includes(user.user.uid) ? (\r\n                    <Favorite\r\n                      style={{\r\n                        marginLeft: \"10px\",\r\n                        marginRight: \"10px\",\r\n                        color: \"red\",\r\n                        cursor: \"pointer\",\r\n                      }}\r\n                      onClick={() => Liked(true)}\r\n                    />\r\n                  ) : (\r\n                    <FavoriteBorder\r\n                      style={{\r\n                        marginLeft: \"10px\",\r\n                        marginRight: \"10px\",\r\n                        cursor: \"pointer\",\r\n                      }}\r\n                      onClick={() => Liked(false)}\r\n                    />\r\n                  )}\r\n\r\n                  <Comment />\r\n                  <Link style={{ marginLeft: \"10px\" }} to={`/image/${postId}`}>\r\n                    <OpenInNew />\r\n                  </Link>\r\n                </div>\r\n                <div>\r\n                  <FacebookShareButton\r\n                    url={`${window.location.href}image/${postId}`}\r\n                    // quote={props.joke.setup + props.joke.punchline}\r\n                    hashtag=\"#StupidProgrammer\"\r\n                  >\r\n                    <FacebookIcon size={25} round={true} />\r\n                  </FacebookShareButton>\r\n                  <WhatsappShareButton\r\n                    url={`${window.location.href}image/${postId}`}\r\n                    // quote={props.joke.setup + props.joke.punchline}\r\n                    hashtag=\"#StupidProgrammer\"\r\n                  >\r\n                    <WhatsappIcon\r\n                      size={25}\r\n                      round={true}\r\n                      style={{ marginLeft: \"5px\", marginRight: \"5px\" }}\r\n                    />\r\n                  </WhatsappShareButton>\r\n                  <LinkedinShareButton\r\n                    url={`${window.location.href}image/${postId}`}\r\n                    // quote={props.joke.setup + props.joke.punchline}\r\n                    hashtag=\"#StupidProgrammer\"\r\n                  >\r\n                    <LinkedinIcon size={25} round={true} />\r\n                  </LinkedinShareButton>\r\n                </div>\r\n              </div>\r\n            ) : null}\r\n            <p\r\n              style={{\r\n                marginLeft: \"10px\",\r\n                color: \"gray\",\r\n                marginTop: \"-5px\",\r\n                fontSize: \"10px\",\r\n              }}\r\n            >\r\n              {post.liked.length} likes {postComment.length} comments\r\n            </p>\r\n          </div>\r\n          <InputEmoji\r\n            maxLength={200}\r\n            style={{ width: \"100vw\", backgroundColor: \"gray\" }}\r\n            value={comment}\r\n            onChange={setComment}\r\n            cleanOnEnter\r\n            onEnter={PostComment}\r\n            placeholder=\"Type a message\"\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  ):null\r\n}\r\n\r\nexport default PostPopup;\r\n"]},"metadata":{},"sourceType":"module"}