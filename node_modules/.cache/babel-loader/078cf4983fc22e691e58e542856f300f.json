{"ast":null,"code":"import _regeneratorRuntime from\"G:/projects/photogram/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"G:/projects/photogram/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"G:/projects/photogram/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useState,useEffect}from\"react\";import ChatHeader from\"../components/chat/ChatHeader\";import ChatMessage from\"../components/chat/ChatMessage\";import ChatMessageHeader from\"../components/chat/ChatMessageHeader\";import ChatPerson from\"../components/chat/ChatPerson\";import\"./chat.css\";import chat from\"../images/chat.gif\";import Usercontext from\"../context/user\";import{findActiveUser,profileUser}from\"../services/firebase\";import firebase from\"firebase\";import{Avatar}from\"@material-ui/core\";import Person from\"../components/chat/Person\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ChatWith(){var user_uid=window.location.href.split(\"/chat/\")[1];var user=useContext(Usercontext);var _useState=useState(null),_useState2=_slicedToArray(_useState,2),activeUser=_useState2[0],setActiveUser=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),friendUser=_useState4[0],setFriendUser=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),chatId=_useState6[0],setChatId=_useState6[1];useEffect(function(){function getAllInformation(){return _getAllInformation.apply(this,arguments);}function _getAllInformation(){_getAllInformation=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var currentUser,proUser;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return findActiveUser(user.user.uid);case 2:currentUser=_context.sent;setActiveUser(currentUser[0]);if(!(user_uid!==\"home\")){_context.next=11;break;}_context.next=7;return profileUser(user_uid);case 7:proUser=_context.sent;setFriendUser(proUser[0]);_context.next=12;break;case 11:setFriendUser(null);case 12:case\"end\":return _context.stop();}}},_callee);}));return _getAllInformation.apply(this,arguments);}if(user.user){getAllInformation();}},[user_uid]);return user&&activeUser?/*#__PURE__*/_jsxs(\"div\",{className:\"chat\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"chat__left\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"chatHeader\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"chatHeader__left\",children:[/*#__PURE__*/_jsx(Avatar,{className:\"chatHeader__avatar\",src:activeUser.profile_photo}),/*#__PURE__*/_jsx(\"h4\",{style:{marginLeft:\"10px\",color:\"#42c99c\",textShadow:\"2px 2px 1px green\"},children:user.user.displayName})]}),/*#__PURE__*/_jsx(\"div\",{className:\"chatHeader__right\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"chatPerson\",style:{overflow:\"scroll\",height:\"79vh\",scroll:\"hidden\"},children:activeUser&&user?activeUser.chat_friends.map(function(friend){return/*#__PURE__*/_jsx(Person,{friend:friend},friend);}):null})]}),user_uid===\"home\"?/*#__PURE__*/_jsxs(\"div\",{className:\"chat__right\",children:[/*#__PURE__*/_jsxs(\"h3\",{style:{textAlign:\"center\",color:\"#7a7258\"},children:[\" \",\"You are free to chat\\uD83D\\uDE80\\uD83D\\uDE04\"]}),/*#__PURE__*/_jsx(\"img\",{src:chat,className:\"chat_image\"})]}):activeUser&&friendUser?/*#__PURE__*/_jsxs(\"div\",{className:\"chat__right\",children:[/*#__PURE__*/_jsx(ChatMessageHeader,{user_uid:user_uid}),/*#__PURE__*/_jsx(ChatMessage,{user_uid:user_uid,activeUser:activeUser,friendUser:friendUser})]}):null]}):/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h5\",{style:{textAlign:\"centers\"},children:\"Login For access this page \"})});}export default ChatWith;","map":{"version":3,"sources":["G:/projects/photogram/src/pages/ChatWith.js"],"names":["React","useContext","useState","useEffect","ChatHeader","ChatMessage","ChatMessageHeader","ChatPerson","chat","Usercontext","findActiveUser","profileUser","firebase","Avatar","Person","ChatWith","user_uid","window","location","href","split","user","activeUser","setActiveUser","friendUser","setFriendUser","chatId","setChatId","getAllInformation","uid","currentUser","proUser","profile_photo","marginLeft","color","textShadow","displayName","overflow","height","scroll","chat_friends","map","friend","textAlign"],"mappings":"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","sourcesContent":["import React, { useContext, useState, useEffect } from \"react\";\r\nimport ChatHeader from \"../components/chat/ChatHeader\";\r\nimport ChatMessage from \"../components/chat/ChatMessage\";\r\nimport ChatMessageHeader from \"../components/chat/ChatMessageHeader\";\r\nimport ChatPerson from \"../components/chat/ChatPerson\";\r\nimport \"./chat.css\";\r\nimport chat from \"../images/chat.gif\";\r\nimport Usercontext from \"../context/user\";\r\nimport { findActiveUser, profileUser } from \"../services/firebase\";\r\nimport firebase from \"firebase\";\r\nimport { Avatar } from \"@material-ui/core\";\r\nimport Person from \"../components/chat/Person\";\r\n\r\nfunction ChatWith() {\r\n  const user_uid = window.location.href.split(\"/chat/\")[1];\r\n  const user = useContext(Usercontext);\r\n  const [activeUser, setActiveUser] = useState(null);\r\n  const [friendUser, setFriendUser] = useState(null);\r\n\r\n  const [chatId, setChatId] = useState(null);\r\n\r\n  useEffect(() => {\r\n    async function getAllInformation() {\r\n      let currentUser = await findActiveUser(user.user.uid);\r\n      setActiveUser(currentUser[0]);\r\n      if (user_uid !== \"home\") {\r\n        let proUser = await profileUser(user_uid);\r\n        setFriendUser(proUser[0]);\r\n      } else {\r\n        setFriendUser(null);\r\n      }\r\n    }\r\n\r\n    if (user.user) {\r\n      getAllInformation();\r\n    }\r\n  }, [user_uid]);\r\n\r\n\r\n\r\n  return user && activeUser ? (\r\n    <div className=\"chat\">\r\n      <div className=\"chat__left\">\r\n        <div className=\"chatHeader\">\r\n          <div className=\"chatHeader__left\">\r\n            <Avatar\r\n              className=\"chatHeader__avatar\"\r\n              src={activeUser.profile_photo}\r\n            />\r\n            <h4\r\n              style={{\r\n                marginLeft: \"10px\",\r\n                color: \"#42c99c\",\r\n                textShadow: \"2px 2px 1px green\",\r\n              }}\r\n            >\r\n              {user.user.displayName}\r\n            </h4>\r\n          </div>\r\n          <div className=\"chatHeader__right\"></div>\r\n        </div>\r\n        <div\r\n          className=\"chatPerson\"\r\n          style={{ overflow: \"scroll\", height: \"79vh\", scroll: \"hidden\" }}\r\n        >\r\n          {activeUser && user\r\n            ? activeUser.chat_friends.map((friend) => (\r\n                <Person friend={friend} key={friend} />\r\n              ))\r\n            : null}\r\n        </div>\r\n      </div>\r\n      {user_uid === \"home\"  ? (\r\n        <div className=\"chat__right\">\r\n          <h3 style={{ textAlign: \"center\", color: \"#7a7258\" }}>\r\n            {\" \"}\r\n            You are free to chatðŸš€ðŸ˜„\r\n          </h3>\r\n          <img src={chat} className=\"chat_image\" />\r\n        </div>\r\n      ) : activeUser && friendUser ? (\r\n        <div className=\"chat__right\">\r\n          <ChatMessageHeader user_uid={user_uid} />\r\n          <ChatMessage\r\n            user_uid={user_uid}\r\n            activeUser={activeUser}\r\n            friendUser={friendUser}\r\n          />\r\n        </div>\r\n      ) : null}\r\n    </div>\r\n  ) : (\r\n    <div>\r\n      <h5 style={{ textAlign: \"centers\" }}>Login For access this page </h5>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ChatWith;\r\n"]},"metadata":{},"sourceType":"module"}