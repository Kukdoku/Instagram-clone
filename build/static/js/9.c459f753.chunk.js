(this.webpackJsonpphotogram=this.webpackJsonpphotogram||[]).push([[9],{238:function(e,t,a){"use strict";var s=a(3),r=a(10),c=a(2),n=a(19),i=(a(17),a(22)),o=a(26),l=c.forwardRef((function(e,t){var a=e.animation,i=void 0===a?"pulse":a,o=e.classes,l=e.className,d=e.component,u=void 0===d?"span":d,h=e.height,p=e.variant,j=void 0===p?"text":p,f=e.width,b=Object(r.a)(e,["animation","classes","className","component","height","variant","width"]),m=Boolean(b.children);return c.createElement(u,Object(s.a)({ref:t,className:Object(n.a)(o.root,o[j],l,m&&[o.withChildren,!f&&o.fitContent,!h&&o.heightAuto],!1!==i&&o[i])},b,{style:Object(s.a)({width:f,height:h},b.style)}))}));t.a=Object(o.a)((function(e){return{root:{display:"block",backgroundColor:Object(i.b)(e.palette.text.primary,"light"===e.palette.type?.11:.13),height:"1.2em"},text:{marginTop:0,marginBottom:0,height:"auto",transformOrigin:"0 60%",transform:"scale(1, 0.60)",borderRadius:e.shape.borderRadius,"&:empty:before":{content:'"\\00a0"'}},rect:{},circle:{borderRadius:"50%"},pulse:{animation:"$pulse 1.5s ease-in-out 0.5s infinite"},"@keyframes pulse":{"0%":{opacity:1},"50%":{opacity:.4},"100%":{opacity:1}},wave:{position:"relative",overflow:"hidden","&::after":{animation:"$wave 1.6s linear 0.5s infinite",background:"linear-gradient(90deg, transparent, ".concat(e.palette.action.hover,", transparent)"),content:'""',position:"absolute",transform:"translateX(-100%)",bottom:0,left:0,right:0,top:0}},"@keyframes wave":{"0%":{transform:"translateX(-100%)"},"60%":{transform:"translateX(100%)"},"100%":{transform:"translateX(100%)"}},withChildren:{"& > *":{visibility:"hidden"}},fitContent:{maxWidth:"fit-content"},heightAuto:{height:"auto"}}}),{name:"MuiSkeleton"})(l)},249:function(e,t,a){},250:function(e,t,a){},251:function(e,t,a){},252:function(e,t,a){},253:function(e,t,a){},275:function(e,t,a){"use strict";a.r(t);var s=a(7),r=a.n(s),c=a(18),n=a(38),i=a(2),o=a(108),l=(a(249),a(6));var d=a(119),u=a(107),h=a(124),p=(a(250),a(11));a(251);var j=function(e){var t=e.chat,a=e.activeUser;return t&&a?Object(l.jsxs)("div",{className:"chatShow",style:{display:"flex",justifyContent:"space-between"},children:[t.message_sender_uid===a.userId?Object(l.jsx)("div",{}):null,Object(l.jsxs)("div",{children:[Object(l.jsxs)("div",{style:{display:"flex"},className:"chatShowOk",children:[""!==t.senderpic?Object(l.jsx)(o.a,{src:t.senderpic,className:"senderPic",style:t.message_sender_uid===a.userId?{border:"2px solid green"}:{border:"2px solid red"}}):Object(l.jsx)(o.a,{className:"senderPic"}),Object(l.jsxs)("h6",{style:{display:"relative",marginTop:"10px",marginLeft:"5px"},children:[t.message_sender,Object(l.jsxs)("span",{style:{fontSize:"7px",color:"gray",marginLeft:"5px"},children:[" ",t.timeStamp?t.timeStamp.toDate().toDateString():null]})]})]}),Object(l.jsx)("div",{className:"chatShow__message",style:t.message_sender_uid===a.userId?{backgroundColor:"#ffa680"}:{backgroundColor:"#9afcb1"},children:Object(l.jsx)("p",{style:{padding:"10px"},children:t.message})})]})]}):null},f=a(53);var b=function(e){var t=e.activeUser,a=e.friendUser,s=e.user_uid,o=Object(i.useState)(""),f=Object(n.a)(o,2),b=f[0],m=f[1],x=Object(i.useState)(null),O=Object(n.a)(x,2),g=O[0],v=O[1],y=Object(i.useState)(!1),_=Object(n.a)(y,2),w=_[0],N=_[1];function k(){return S.apply(this,arguments)}function S(){return(S=Object(c.a)(r.a.mark((function e(){var c,n,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!w){e.next=5;break}return e.next=3,p.a.firestore().collection("chat").doc("allchatCollection").collection(t.chatUrl[s]).add({message_sender:t.username,message:b,timeStamp:p.a.firestore.FieldValue.serverTimestamp(),message_sender_uid:t.userId,senderpic:t.profile_photo});case 3:e.next=22;break;case 5:return c=t.userId+a.userId,(n=t.chatUrl)[s]=c,(i=a.chatUrl)[t.userId]=c,e.next=12,p.a.firestore().collection("users").doc(t.docId).update({chat_friends:[].concat(Object(d.a)(t.chat_friends),[s])});case 12:return e.next=14,p.a.firestore().collection("users").doc(t.docId).update({chatUrl:n});case 14:return e.next=16,p.a.firestore().collection("users").doc(a.docId).update({chat_friends:[].concat(Object(d.a)(a.chat_friends),[t.userId])});case 16:return e.next=18,p.a.firestore().collection("users").doc(a.docId).update({chatUrl:i});case 18:return e.next=20,p.a.firestore().collection("chat").doc("allchatCollection").collection(c).add({message_sender:t.username,message:b,timeStamp:p.a.firestore.FieldValue.serverTimestamp(),message_sender_uid:t.userId,senderpic:t.profile_photo});case 20:N(!0),window.location.reload();case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(i.useEffect)((function(){function e(){return(e=Object(c.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.firestore().collection("chat").doc("allchatCollection").collection(t).orderBy("timeStamp","desc");case 2:return a=e.sent,e.next=5,a.onSnapshot((function(e){v(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}s&&t&&a&&t.chat_friends.includes(s)&&(!function(t){e.apply(this,arguments)}(t.chatUrl[s]),N(!0))}),[s,w]),t&&a?Object(l.jsxs)("div",{className:"chatMessage",style:{overflow:"scroll",height:"70vh"},children:[g?g.map((function(e){return Object(l.jsx)(j,{chat:e.data,activeUser:t},e.id)})):null,Object(l.jsxs)("div",{className:"chatMessageInput",style:{display:"flex",position:"absolute",bottom:-5,width:"67%",objectFit:"contain",backgroundColor:"#f5f4f2"},children:[Object(l.jsx)(h.a,{value:b,onChange:m,cleanOnEnter:!0,onEnter:k,placeholder:"Type a message"}),Object(l.jsxs)(u.a,{onClick:k,disabled:!b.trim(),children:[" ","Send"]})]})]}):Object(l.jsx)("h5",{children:"Loading"})},m=a(238);a(252);var x=function(e){var t=e.user_uid,a=(e.activeUser,Object(i.useState)(null)),s=Object(n.a)(a,2),d=s[0],u=s[1];return Object(i.useEffect)((function(){function e(){return(e=Object(c.a)(r.a.mark((function e(){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.k)(t);case 2:a=e.sent,u(a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}"home"!==t&&function(){e.apply(this,arguments)}()}),[t]),Object(l.jsx)("div",{className:"chatMessageHeader",children:d?Object(l.jsxs)("div",{className:"chatMessageHeader__left",children:[d[0].profile_photo?Object(l.jsx)(o.a,{className:"chatMessageHeader__avatar",src:d[0].profile_photo,style:{border:"2px solid gray"}}):Object(l.jsx)(o.a,{className:"chatMessageHeader__avatar"}),Object(l.jsx)("h3",{style:{marginLeft:"10px",textShadow:"2px 2px 5px red"},children:d[0].username})]}):Object(l.jsxs)("div",{className:"chatMessageHeader__left",children:[Object(l.jsx)(m.a,{variant:"circle",width:40,height:40}),Object(l.jsx)(m.a,{variant:"text",width:30,height:50})]})})},O=a(27);var g=function(e){var t=e.friend,a=e.user_uid,s=Object(i.useState)(null),d=Object(n.a)(s,2),u=d[0],h=d[1];return Object(i.useEffect)((function(){function e(){return(e=Object(c.a)(r.a.mark((function e(){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.k)(t);case 2:a=e.sent,h(a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t&&function(){e.apply(this,arguments)}()}),[a]),u?Object(l.jsxs)("div",{className:"chatPerson__person",style:a===u[0].userId?{padding:"10px",display:"flex",alignItems:"center",borderBottom:"1px solid gray",objectFit:"contain",cursor:"pointer",backgroundColor:"azure"}:{padding:"10px",display:"flex",alignItems:"center",borderBottom:"1px solid gray",objectFit:"contain",cursor:"pointer"},children:[u[0].profile_photo?Object(l.jsx)(o.a,{src:u[0].profile_photo,style:{border:"1px solid green"}}):Object(l.jsx)(o.a,{style:{border:"1px solid green"}}),Object(l.jsx)(O.b,{to:"/chat/".concat(u[0].userId),style:{textDecoration:"none"},children:Object(l.jsx)("p",{style:{marginLeft:"10px"},children:u[0].username})}),Object(l.jsx)(O.b,{to:"/profile/".concat(u[0].userId),style:{marginLeft:"auto",textDecoration:"none"},children:"profile"})]},t.userId):null};a(253);var v=a.p+"static/media/chat.386553c3.gif",y=a(39);t.default=function(){var e=window.location.href.split("/chat/")[1],t=Object(i.useContext)(y.a),a=Object(i.useState)(null),s=Object(n.a)(a,2),d=s[0],u=s[1],h=Object(i.useState)(null),p=Object(n.a)(h,2),j=p[0],m=p[1],O=Object(i.useState)(null),_=Object(n.a)(O,2);return _[0],_[1],Object(i.useEffect)((function(){function a(){return(a=Object(c.a)(r.a.mark((function a(){var s,c;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(f.e)(t.user.uid);case 2:if(s=a.sent,u(s[0]),"home"===e){a.next=11;break}return a.next=7,Object(f.k)(e);case 7:c=a.sent,m(c[0]),a.next=12;break;case 11:m(null);case 12:case"end":return a.stop()}}),a)})))).apply(this,arguments)}t.user&&function(){a.apply(this,arguments)}()}),[e]),t&&d?Object(l.jsxs)("div",{className:"chat",children:[Object(l.jsxs)("div",{className:"chat__left",children:[Object(l.jsxs)("div",{className:"chatHeader",children:[Object(l.jsxs)("div",{className:"chatHeader__left",children:[Object(l.jsx)(o.a,{className:"chatHeader__avatar",src:d.profile_photo}),Object(l.jsx)("h4",{style:{marginLeft:"10px",color:"#42c99c",textShadow:"2px 2px 1px green"},children:t.user.displayName})]}),Object(l.jsx)("div",{className:"chatHeader__right"})]}),Object(l.jsx)("div",{className:"chatPerson",style:{overflow:"scroll",height:"79vh",scroll:"hidden"},children:d&&t?d.chat_friends.map((function(e){return Object(l.jsx)(g,{friend:e},e)})):null})]}),"home"===e?Object(l.jsxs)("div",{className:"chat__right",children:[Object(l.jsxs)("h3",{style:{textAlign:"center",color:"#7a7258"},children:[" ","You are free to chat\ud83d\ude80\ud83d\ude04"]}),Object(l.jsx)("img",{src:v,className:"chat_image"})]}):d&&j?Object(l.jsxs)("div",{className:"chat__right",children:[Object(l.jsx)(x,{user_uid:e}),Object(l.jsx)(b,{user_uid:e,activeUser:d,friendUser:j})]}):null]}):Object(l.jsx)("div",{children:Object(l.jsx)("h5",{style:{textAlign:"centers"},children:"Login For access this page "})})}}}]);
//# sourceMappingURL=9.c459f753.chunk.js.map