(this.webpackJsonpphotogram=this.webpackJsonpphotogram||[]).push([[8],{127:function(e,t,n){"use strict";var c=n(119),s=n(7),r=n.n(s),a=n(18),i=n(38),o=n(2),l=n(124),d=n(27),j=n(39),u=n(53),p=n(11),x=n(261),b=n(262),h=n(263),m=n(264),f=n(265),O=n(266),g=n(267),v=n(268),y=n(269),w=n(270),_=n(123),S=n.n(_),k=n(6);t.a=function(e){var t=e.postId,n=Object(o.useContext)(j.a),s=Object(o.useState)(""),_=Object(i.a)(s,2),N=_[0],z=_[1],C=Object(o.useState)([]),U=Object(i.a)(C,2),D=U[0],I=U[1],L=Object(o.useState)(null),R=Object(i.a)(L,2),P=R[0],T=R[1];Object(o.useEffect)((function(){function e(){return(e=Object(a.a)(r.a.mark((function e(){var n,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.f)(t);case 2:return n=e.sent,e.next=5,Object(u.i)(t);case 5:return c=e.sent,e.next=8,c.onSnapshot((function(e){T(e.data())}));case 8:return e.next=10,n.onSnapshot((function(e){I(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}""!==t&&function(){e.apply(this,arguments)}()}),[t]);var E=function(){var e=Object(a.a)(r.a.mark((function e(s){var a,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=8;break}return a=P.liked,(i=a.indexOf(n.user.uid))>-1&&a.splice(i,1),e.next=6,p.a.firestore().collection("photos").doc(t).update({liked:a});case 6:e.next=10;break;case 8:return e.next=10,p.a.firestore().collection("photos").doc(t).update({liked:[].concat(Object(c.a)(P.liked),[n.user.uid])});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(a.a)(r.a.mark((function e(s){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return[].concat(Object(c.a)(D),[{comment:N,commentUser:n.user.username,timestamp:p.a.firestore.FieldValue.serverTimestamp(),commentUserUid:n.user.uid}]),e.next=3,p.a.firestore().collection("photos").doc(t).collection("comments").add({comment:N,commentUser:n.user.displayName,timestamp:p.a.firestore.FieldValue.serverTimestamp(),commentUserUid:n.user.uid});case 3:z("");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return P?Object(k.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"60% 40%"},children:[Object(k.jsx)("div",{children:"video"===P.type?Object(k.jsx)(S.a,{url:P.fileUrl,controls:"true",width:"100%",height:"89vh",style:{width:"100%",height:"89vh",objectFit:"contain"}}):Object(k.jsx)("img",{src:P.fileUrl,alt:"post Image",style:{width:"100%",height:"89vh",border:"1px solid black",objectFit:"contain"}})}),Object(k.jsxs)("div",{children:[Object(k.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",margin:"10px"},children:[Object(k.jsx)("div",{style:{display:"flex",alignItems:"center"},children:Object(k.jsxs)("div",{style:{marginLeft:"10px"},children:[Object(k.jsx)(d.b,{to:"/profile/".concat(P.user_uid),style:{textDecoration:"none"},children:Object(k.jsx)("h5",{children:P.username})}),Object(k.jsx)("p",{style:{fontSize:"10px",color:"gray"},children:P.timestamp.toDate().toDateString()})]})}),Object(k.jsx)(d.b,{to:"/profile/".concat(P.user_uid),style:{textDecoration:"none"},children:"Profile"})]}),Object(k.jsx)("div",{children:Object(k.jsxs)("p",{style:{borderBottom:"1px solid black",fontSize:"14px",paddingLeft:"10px",paddingBottom:"10px"},children:[Object(k.jsx)("b",{children:"caption: "}),P.caption,Object(k.jsx)("span",{style:{color:"gray",fontSize:"13px",marginLeft:"6px"},children:"Update my Profile Pic at"===P.caption?P.timestamp.toDate().toDateString():null})]})}),Object(k.jsx)("div",{children:Object(k.jsx)("div",{style:{margin:"10px 0px 0px 10px",overflow:"scroll",overflowX:"hidden",height:"55vh"},children:D.map((function(e){var t=e.data,n=e.id;return Object(k.jsx)("div",{style:{display:"flex",margin:"5px 7px 9px 5px "},children:Object(k.jsxs)("p",{children:[Object(k.jsx)("span",{style:{color:"#610909",fontSize:"15px",fontWeight:"bold",marginRight:"5px"},children:Object(k.jsxs)(d.b,{to:"/profile/".concat(t.commentUserUid),style:{textDecoration:"none"},children:[t?t.commentUser:null," :"]})}),Object(k.jsxs)("span",{style:{fontSize:"15px",color:"#4a4747"},children:[t?t.comment:null," "]}),Object(k.jsx)("span",{style:{color:"gray",fontSize:"10px"},children:t&&t.timestamp?t.timestamp.toDate().toDateString():null})]})},n)}))})}),Object(k.jsxs)("div",{style:{position:"fixed",bottom:"0px",width:"32vw",backgroundColor:"#c7c7c7",borderTop:"2px solid gray"},children:[Object(k.jsxs)("div",{children:[" ",n?Object(k.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",margin:"10px 10px 0 10px"},children:[Object(k.jsxs)("div",{children:[P.liked.includes(n.user.uid)?Object(k.jsx)(x.a,{style:{marginLeft:"10px",marginRight:"10px",color:"red",cursor:"pointer"},onClick:function(){return E(!0)}}):Object(k.jsx)(b.a,{style:{marginLeft:"10px",marginRight:"10px",cursor:"pointer"},onClick:function(){return E(!1)}}),Object(k.jsx)(h.a,{}),Object(k.jsx)(d.b,{style:{marginLeft:"10px"},to:"/image/".concat(t),children:Object(k.jsx)(m.a,{})})]}),Object(k.jsxs)("div",{children:[Object(k.jsx)(f.a,{url:"".concat(window.location.href,"image/").concat(t),hashtag:"#StupidProgrammer",children:Object(k.jsx)(O.a,{size:25,round:!0})}),Object(k.jsx)(g.a,{url:"".concat(window.location.href,"image/").concat(t),hashtag:"#StupidProgrammer",children:Object(k.jsx)(v.a,{size:25,round:!0,style:{marginLeft:"5px",marginRight:"5px"}})}),Object(k.jsx)(y.a,{url:"".concat(window.location.href,"image/").concat(t),hashtag:"#StupidProgrammer",children:Object(k.jsx)(w.a,{size:25,round:!0})})]})]}):null,Object(k.jsxs)("p",{style:{marginLeft:"10px",color:"gray",marginTop:"-5px",fontSize:"10px"},children:[P.liked.length," likes ",D.length," comments"]})]}),Object(k.jsx)(l.a,{maxLength:200,style:{width:"100vw",backgroundColor:"gray"},value:N,onChange:z,cleanOnEnter:!0,onEnter:B,placeholder:"Type a message"})]})]})]}):null}},243:function(e,t,n){},244:function(e,t,n){(function(t){var n="undefined"!==typeof t&&t.pid?t.pid.toString(36):"";function c(){var e=Date.now(),t=c.last||e;return c.last=e>t?e:t+1}e.exports=e.exports.default=function(e,t){return(e||"")+""+n+c().toString(36)+(t||"")},e.exports.process=function(e,t){return(e||"")+n+c().toString(36)+(t||"")},e.exports.time=function(e,t){return(e||"")+c().toString(36)+(t||"")}}).call(this,n(56))},245:function(e,t,n){},246:function(e,t,n){},247:function(e,t,n){},248:function(e,t,n){},276:function(e,t,n){"use strict";n.r(t);var c=n(2),s=n.n(c),r=n(7),a=n.n(r),i=n(18),o=n(38),l=n(39),d=n(53),j=n(119),u=n(55),p=n(108),x=n(107),b=n(264),h=n(261),m=n(262),f=n(263),O=n(37),g=Object(O.a)(c.createElement("path",{d:"M19 12h-2v3h-3v2h5v-5zM7 9h3V7H5v5h2V9zm14-6H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16.01H3V4.99h18v14.02z"}),"AspectRatio"),v=n(238),y=(n(243),n(11)),w=n(124),_=(n(45),n(27)),S=n(265),k=n(266),N=n(267),z=n(268),C=n(269),U=n(270),D=n(271),I=n(274),L=n(127),R=n(123),P=n.n(R),T=n(6);function E(){return{top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(50,"%)")}}var B=Object(D.a)((function(e){return{paper:Object(u.a)({position:"absolute",width:"80%",height:"90%",backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(0,-5,2)},"backgroundColor"," rgba(255,255,255,0.9)")}}));n(244);var V=function(e){var t=e.postId,n=e.uploaderId,r=window.location.href,u=Object(c.useState)(null),O=Object(o.a)(u,2),D=O[0],R=O[1],V=Object(c.useState)(null),F=Object(o.a)(V,2),A=F[0],H=F[1],J=Object(c.useState)(""),M=Object(o.a)(J,2),K=M[0],W=M[1],X=Object(c.useContext)(l.a),Y=Object(c.useState)([]),q=Object(o.a)(Y,2),G=q[0],Q=q[1],Z=B(),$=s.a.useState(E),ee=Object(o.a)($,1)[0],te=s.a.useState(!1),ne=Object(o.a)(te,2),ce=ne[0],se=ne[1],re=Object(T.jsx)("div",{style:ee,className:Z.paper,children:Object(T.jsx)(L.a,{post:D,postId:t})});Object(c.useEffect)((function(){function e(){return(e=Object(i.a)(a.a.mark((function e(){var c,s,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.i)(t);case 2:return c=e.sent,e.next=5,Object(d.f)(t);case 5:return s=e.sent,e.next=8,Object(d.k)(n);case 8:return r=e.sent,H(r),e.next=12,c.onSnapshot((function(e){R(e.data())}));case 12:return e.next=14,s.onSnapshot((function(e){Q(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}));case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t&&n&&X&&function(){e.apply(this,arguments)}()}),[t]);var ae=function(){var e=Object(i.a)(a.a.mark((function e(n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return[].concat(Object(j.a)(G),[{comment:K,commentUser:X.user.username,timestamp:y.a.firestore.FieldValue.serverTimestamp(),commentUserUid:X.user.uid}]),e.next=3,y.a.firestore().collection("photos").doc(t).collection("comments").add({comment:K,commentUser:X.user.displayName,timestamp:y.a.firestore.FieldValue.serverTimestamp(),commentUserUid:X.user.uid});case 3:W("");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ie=function(){var e=Object(i.a)(a.a.mark((function e(n){var c,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=8;break}return c=D.liked,(s=c.indexOf(X.user.uid))>-1&&c.splice(s,1),e.next=6,y.a.firestore().collection("photos").doc(t).update({liked:c});case 6:e.next=10;break;case 8:return e.next=10,y.a.firestore().collection("photos").doc(t).update({liked:[].concat(Object(j.a)(D.liked),[X.user.uid])});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(T.jsxs)("div",{className:"post",children:[D?Object(T.jsxs)("div",{className:"post__all",children:[Object(T.jsx)(I.a,{open:ce,onClose:function(){se(!1)},"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",children:re}),Object(T.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},className:"post__new",children:[Object(T.jsxs)("div",{className:"post_header",children:[A&&A[0].profile_photo?Object(T.jsx)(p.a,{className:"post_avatar",alt:"Vishesh Kumar",src:A[0].profile_photo}):Object(T.jsx)(p.a,{className:"post_avatar"}),Object(T.jsxs)("div",{children:[Object(T.jsx)(_.b,{to:"/profile/".concat(D.user_uid),style:{textDecoration:"none"},children:Object(T.jsx)("h3",{style:{marginRight:"10px"},children:D.username})}),Object(T.jsx)("p",{style:{fontSize:"10px"},children:D.timestamp.toDate().toDateString()})]})]}),Object(T.jsx)(_.b,{style:{marginRight:"10px"},to:"/image/".concat(t),children:Object(T.jsx)(b.a,{})})]}),Object(T.jsxs)("p",{style:{marginLeft:"10px",marginBottom:"10px",fontSize:"13px"},children:[D.caption,Object(T.jsx)("b",{children:"Update my Profile Pic at"===D.caption||"this profile picture is updated at"===D.caption?" ".concat(D.timestamp.toDate().toDateString()):null})]})]}):Object(T.jsxs)("div",{className:"post_header",children:[Object(T.jsx)(v.a,{variant:"circle",className:"post_avatar",width:40,height:40}),Object(T.jsx)(v.a,{variant:"text",width:50,height:30})]}),D?"video"===D.type?Object(T.jsx)(P.a,{url:D.fileUrl,controls:"true",width:"100%",className:"post_image"}):Object(T.jsx)("img",{className:"post_image",src:D.fileUrl,alt:"image of"}):Object(T.jsx)(v.a,{className:"post_image",variant:"rect",width:"100%",height:"300px"}),Object(T.jsxs)("div",{className:"post_bottom",children:[D&&X.user&&G?Object(T.jsxs)("div",{style:{padding:"10px",display:"flex",justifyContent:"space-between"},children:[Object(T.jsxs)("div",{children:[Object(T.jsxs)("div",{className:"post__icon",children:[D.liked.includes(X.user.uid)?Object(T.jsx)(h.a,{style:{cursor:"pointer",color:"red"},onClick:function(){return ie(!0)}}):Object(T.jsx)(m.a,{style:{cursor:"pointer"},onClick:function(){return ie(!1)}}),Object(T.jsx)(f.a,{style:{marginLeft:"10px",cursor:"pointer",marginRight:"10px"},onClick:function(){return window.location.href="#comment"}}),Object(T.jsx)(g,{onClick:function(){se(!0)},style:{cursor:"pointer"}})]}),Object(T.jsxs)("p",{style:{fontSize:"12px",color:"gray"},children:[D.liked.length," Likes ",G.length," Comments"]})]}),Object(T.jsxs)("div",{children:[Object(T.jsx)(S.a,{url:"".concat(r,"image/").concat(t),hashtag:"#StupidProgrammer",children:Object(T.jsx)(k.a,{size:25,round:!0})}),Object(T.jsx)(N.a,{url:"".concat(r,"image/").concat(t),hashtag:"#StupidProgrammer",children:Object(T.jsx)(z.a,{size:25,round:!0,style:{marginLeft:"5px",marginRight:"5px"}})}),Object(T.jsx)(C.a,{url:"".concat(r,"image/").concat(t),hashtag:"#StupidProgrammer",children:Object(T.jsx)(U.a,{size:25,round:!0})})]})]}):null,D&&G?Object(T.jsx)("div",{className:"post_comments",style:{marginBottom:"5px"},children:G.slice(0,5).map((function(e){var t=e.id,n=e.data;return Object(T.jsxs)("p",{children:[Object(T.jsxs)("strong",{children:[Object(T.jsxs)(_.b,{to:"/profile/".concat(n.commentUserUid),style:{textDecoration:"none",fontSize:"13px"},children:[n.commentUser,":"]})," "]}),Object(T.jsx)("small",{children:n.comment}),Object(T.jsx)("span",{style:{fontSize:"10px",color:"gray",position:"relative",left:"2px"},children:n.timestamp?n.timestamp.toDate().toDateString():null})]},t)}))}):Object(T.jsx)(v.a,{className:"post_comments"}),Object(T.jsxs)("div",{className:"post__comments__form",style:{display:"flex"},id:"comment",children:[Object(T.jsx)(w.a,{placeholder:"React on this image",borderRadius:10,borderColor:"white",value:K,onChange:W,cleanOnEnter:!0,onEnter:ae,maxLength:200}),Object(T.jsx)(x.a,{type:"submit",onClick:ae,disabled:!t||!X||""===K.trim(),children:"Post"})]})]})]})};var F=function(){var e=Object(c.useContext)(l.a),t=Object(c.useState)(null),n=Object(o.a)(t,2),s=n[0],r=n[1];return Object(c.useEffect)((function(){function t(){return(t=Object(i.a)(a.a.mark((function t(){var n,c,s;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(d.e)(e.user.uid);case 2:return n=t.sent,t.next=5,n[0].following;case 5:return c=t.sent,t.next=8,Object(d.g)(c);case 8:s=t.sent,r(s);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}e.user&&function(){t.apply(this,arguments)}()}),[]),Object(T.jsx)("div",{className:"dashboard",children:s?s.map((function(e){return Object(T.jsx)(V,{postId:e.postId,uploaderId:e.user_uid},e.postId)})):Object(T.jsx)(V,{post:null})})};n(245),n(246);var A=function(e){var t=e.follow;return Object(T.jsxs)("div",{className:"followerBar__follower",children:[""!==t.profile_photo?Object(T.jsx)(_.b,{to:"/profile/".concat(t.userId),children:Object(T.jsx)(p.a,{className:"followerBar__avatar",src:t.profile_photo})}):Object(T.jsx)(_.b,{to:"/profile/".concat(t.userId),children:Object(T.jsx)(p.a,{className:"followerBar__avatar"})}),Object(T.jsx)("p",{style:{fontSize:"9px"},children:t.username})]})};var H=function(){var e=Object(c.useState)(null),t=Object(o.a)(e,2),n=t[0],s=t[1],r=Object(c.useContext)(l.a);return Object(c.useEffect)((function(){function e(){return(e=Object(i.a)(a.a.mark((function e(){var t,n,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.e)(r.user.uid);case 2:return t=e.sent,e.next=5,t[0].following;case 5:return n=e.sent,e.next=8,Object(d.h)(n);case 8:c=e.sent,s(c);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}r.user&&function(){e.apply(this,arguments)}()}),[r]),Object(T.jsx)("div",{className:"followerBar",children:n?n.map((function(e){return Object(T.jsx)(A,{follow:e},e.postId)})):[1,2,3,4,5,6,7,8,9,10,11,12].map((function(e){return Object(T.jsxs)("div",{className:"followerBar__follower",children:[Object(T.jsx)(v.a,{variant:"circle",width:40,height:40}),Object(T.jsx)(v.a,{variant:"text"})]},e)}))})};n(247);var J=function(){var e=Object(c.useContext)(l.a),t=Object(c.useState)(null),n=Object(o.a)(t,2),s=n[0],r=n[1],j=Object(c.useState)(null),u=Object(o.a)(j,2),x=u[0],b=u[1];return Object(c.useEffect)((function(){function t(){return(t=Object(i.a)(a.a.mark((function t(){var n,c,s;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(d.e)(e.user.uid);case 2:return n=t.sent,t.next=5,n;case 5:return c=t.sent,r(c),t.next=9,Object(d.j)(c[0].following);case 9:s=t.sent,b(s);case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}e.user&&function(){t.apply(this,arguments)}()}),[e]),Object(T.jsxs)("div",{className:"timeline",children:[e.user&&s?Object(T.jsxs)("div",{className:"timeline__header",children:[Object(T.jsx)(_.b,{to:"/profile/".concat(e.user.uid),children:Object(T.jsx)(p.a,{src:s[0].profile_photo,alt:"profilePhoto",style:{border:"1px solid black",marginRight:"10px"}})}),Object(T.jsxs)("p",{children:[Object(T.jsx)("b",{style:{fontSize:"17px"},children:s[0].username})," ",Object(T.jsx)("span",{style:{fontSize:"10px"},children:s[0].fullName})]})]}):Object(T.jsxs)("div",{className:"timeline__header",children:[Object(T.jsx)(v.a,{variant:"circle",width:50,height:50}),Object(T.jsx)(v.a,{variant:"text",width:70,height:30,className:"timeline__username"})]}),Object(T.jsx)("p",{style:{color:"gray",fontSize:"15px",marginTop:"3vh"},children:"Suggestion For You"}),e.user&&s&&x?x.map((function(e){return Object(T.jsxs)("div",{className:"timeline__suggestion",children:[Object(T.jsxs)("div",{className:"timeline__suggestion__left",style:{display:"flex",marginTop:"15px"},children:[e.profile_photo?Object(T.jsx)(p.a,{style:{marginRight:"5px",border:"1px solid gray"},src:e.profile_photo}):Object(T.jsx)(p.a,{style:{marginRight:"5px",border:"1px solid gray"}}),Object(T.jsx)("p",{style:{fontSize:"12px"},children:e.username})]}),Object(T.jsx)("div",{className:"timeline__suggestion__left",children:Object(T.jsx)("h4",{style:{color:"blue"},children:Object(T.jsx)(_.b,{to:"/profile/".concat(e.userId),style:{textDecoration:"none",fontSize:"12px"},children:"profile"})})})]},e.postId)})):Object(T.jsxs)("div",{className:"timeline__suggestion",children:[Object(T.jsxs)("div",{className:"timeline__suggestion__left",children:[Object(T.jsx)(v.a,{variant:"circle",width:40,height:40}),Object(T.jsx)(v.a,{variant:"text",width:70,height:20,className:"timeline__suggestion__left__text"})]}),Object(T.jsx)(v.a,{variant:"text",width:45,height:30})]})]})},M=(n(248),n(25));n(49);t.default=function(){return window.location.search.split("profile/")[1],Object(c.useContext)(l.a).user?Object(T.jsxs)("div",{className:"home",children:[Object(T.jsx)("div",{}),Object(T.jsxs)("div",{children:[Object(T.jsx)(H,{}),Object(T.jsx)(F,{})]}),Object(T.jsx)(J,{}),Object(T.jsx)("div",{})]}):Object(T.jsxs)("div",{children:[Object(T.jsxs)("h1",{style:{textAlign:"center",color:"gray"},children:[" ","Login For post Images"]}),Object(T.jsx)("p",{style:{textAlign:"center",marginTop:"20px"},children:Object(T.jsx)(_.b,{to:M.d,style:{textDecoration:"none"},children:"Login"})})]})}}}]);
//# sourceMappingURL=8.454ab472.chunk.js.map