{"version":3,"sources":["images/notFound.gif","images/loading.gif","pages/IndividualImage.js"],"names":["IndividualImage","user","useContext","Usercontext","imageId","window","location","href","split","useState","post","setPost","thisImageComment","setThisImageComment","controller","comment","setComment","useEffect","a","getIndivisualPost","response","getAllPostComment","postComments","onSnapshot","snapshot","data","docs","map","doc","id","getMyPost","Liked","t","likeditem","liked","index","indexOf","uid","splice","firebase","firestore","collection","update","PostComment","e","commentUser","username","timestamp","FieldValue","serverTimestamp","commentUserUid","add","displayName","style","display","gridTemplateColumns","className","type","url","fileUrl","controls","width","height","objectFit","src","alt","border","flexDirection","alignItems","justifyContent","margin","marginLeft","to","user_uid","fontSize","color","toDate","toDateString","textDecoration","marginBottom","borderBottom","padding","caption","overflow","overflowX","fontWeight","marginRight","position","bottom","backgroundColor","borderTop","includes","Favorite","cursor","onClick","FavoriteBorder","Comment","FacebookShareButton","hashtag","FacebookIcon","size","round","WhatsappShareButton","WhatsappIcon","LinkedinShareButton","LinkedinIcon","marginTop","length","maxLength","value","onChange","cleanOnEnter","onEnter","placeholder","notFound","loading"],"mappings":"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","file":"static/js/13.ee900adc.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/notFound.a4d44b49.gif\";","export default __webpack_public_path__ + \"static/media/loading.c7d9f081.gif\";","import { Avatar } from \"@material-ui/core\";\r\nimport React, { useState, useEffect, useContext } from \"react\";\r\nimport InputEmoji from \"react-input-emoji\";\r\n\r\nimport Usercontext from \"../context/user\";\r\n\r\nimport notFound from \"../images/notFound.gif\";\r\nimport loading from \"../images/loading.gif\";\r\nimport {\r\n  findActiveUser,\r\n  getAllPostComment,\r\n  getIndivisualPost,\r\n} from \"../services/firebase\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Comment, Favorite, FavoriteBorder } from \"@material-ui/icons\";\r\nimport {\r\n  FacebookIcon,\r\n  FacebookShareButton,\r\n  LinkedinIcon,\r\n  LinkedinShareButton,\r\n  WhatsappIcon,\r\n  WhatsappShareButton,\r\n} from \"react-share\";\r\nimport firebase from \"firebase\";\r\nimport ReactPlayer from \"react-player\";\r\n\r\nfunction IndividualImage() {\r\n  const user = useContext(Usercontext);\r\n  const imageId = window.location.href.split(\"/image/\")[1];\r\n  const [post, setPost] = useState(null);\r\n  const [activeUser, setActiveUser] = useState(null);\r\n  const [thisImageComment, setThisImageComment] = useState([]);\r\n  const [controller, setController] = useState(true);\r\n\r\n  const [comment, setComment] = useState(\"\");\r\n\r\n  \r\n\r\n  useEffect(() => {\r\n    async function getMyPost() {\r\n      const response = await getIndivisualPost(imageId);\r\n      const postComments = await getAllPostComment(imageId);\r\n\r\n      await response.onSnapshot((snapshot) => {\r\n        setPost(snapshot.data());\r\n      });\r\n      await postComments.onSnapshot((snapshot) => {\r\n        setThisImageComment(\r\n          snapshot.docs.map((doc) => ({\r\n            id: doc.id,\r\n            data: doc.data(),\r\n          }))\r\n        );\r\n      });\r\n    }\r\n    if (imageId !== \"\") {\r\n      getMyPost();\r\n    }\r\n  }, [imageId]);\r\n\r\n  const Liked = async (t) => {\r\n    if (t) {\r\n      const likeditem = post.liked;\r\n      var index = likeditem.indexOf(user.user.uid);\r\n      if (index > -1) {\r\n        likeditem.splice(index, 1);\r\n      }\r\n      await firebase.firestore().collection(\"photos\").doc(imageId).update({\r\n        liked: likeditem,\r\n      });\r\n    } else {\r\n      await firebase\r\n        .firestore()\r\n        .collection(\"photos\")\r\n        .doc(imageId)\r\n        .update({\r\n          liked: [...post.liked, user.user.uid],\r\n        });\r\n    }\r\n  };\r\n\r\n  const PostComment = async (e) => {\r\n    // e.preventDefault();\r\n    const comments = [\r\n      ...thisImageComment,\r\n      {\r\n        comment: comment,\r\n        commentUser: user.user.username,\r\n        timestamp: firebase.firestore.FieldValue.serverTimestamp(),\r\n        commentUserUid: user.user.uid,\r\n      },\r\n    ];\r\n\r\n    await firebase\r\n      .firestore()\r\n      .collection(\"photos\")\r\n      .doc(imageId)\r\n      .collection(\"comments\")\r\n      .add({\r\n        comment: comment,\r\n        commentUser: user.user.displayName,\r\n        timestamp: firebase.firestore.FieldValue.serverTimestamp(),\r\n        commentUserUid: user.user.uid,\r\n      });\r\n\r\n    // setThisImageComment(comments);\r\n\r\n    setComment(\"\");\r\n  };\r\n\r\n  // console.log(thisImageComment);\r\n\r\n  return controller ? (\r\n    post && user ? (\r\n      <div\r\n        style={{ display: \"grid\", gridTemplateColumns: \"60% 40%\" }}\r\n        className=\"individualImage\"\r\n      >\r\n        <div\r\n          style={{\r\n            // borderRight: \"1px solid gray\",\r\n            // backgroundColor: \"#343835\",\r\n            // margin: \"0 10px 0 10px\",\r\n          }}\r\n        >\r\n          {post.type === \"video\" ? (\r\n            <ReactPlayer\r\n              url={post.fileUrl}\r\n              controls=\"true\"\r\n              width=\"100%\"\r\n              height=\"89vh\"\r\n              style={{\r\n                width: \"100%\",\r\n                height: \"89vh\",\r\n                objectFit: \"contain\",\r\n              }}\r\n            />\r\n          ) : (\r\n            <img\r\n              src={post.fileUrl}\r\n              alt=\"post Image\"\r\n              style={{\r\n                width: \"100%\",\r\n                height: \"89vh\",\r\n                border: \"1px solid black\",\r\n\r\n                // position: \"relative\",\r\n\r\n                objectFit: \"contain\",\r\n              }}\r\n            />\r\n          )}\r\n        </div>\r\n        <div style={{ display: \"flex\", flexDirection: \"column\" }}>\r\n          <div\r\n            style={{\r\n              display: \"flex\",\r\n              alignItems: \"center\",\r\n              justifyContent: \"space-between\",\r\n              margin: \"10px\",\r\n            }}\r\n          >\r\n            <div style={{ display: \"flex\", alignItems: \"center\" }}>\r\n              {/* <Avatar /> */}\r\n              <div style={{ marginLeft: \"10px\" }}>\r\n                <Link to={`/profile/${post.user_uid}`}>\r\n                  <h5>{post.username}</h5>\r\n                </Link>\r\n                <p style={{ fontSize: \"10px\", color: \"gray\" }}>\r\n                  {post.timestamp.toDate().toDateString()}\r\n                </p>\r\n              </div>\r\n            </div>\r\n            <Link\r\n              to={`/profile/${post.user_uid}`}\r\n              style={{ textDecoration: \"none\" }}\r\n            >\r\n              Profile\r\n            </Link>\r\n          </div>\r\n          <div>\r\n            <p\r\n              style={{\r\n                marginBottom: \"10px\",\r\n                borderBottom: \"1px solid black\",\r\n                fontSize: \"14px\",\r\n                padding: \"10px\",\r\n              }}\r\n            >\r\n              <b>caption: </b>\r\n              {post.caption}\r\n              <span\r\n                style={{ color: \"gray\", fontSize: \"13px\", marginLeft: \"6px\" }}\r\n              >\r\n                {post.caption === \"Update my Profile Pic at\"\r\n                  ? post.timestamp.toDate().toDateString()\r\n                  : null}\r\n              </span>\r\n            </p>\r\n          </div>\r\n          <div\r\n            style={{\r\n              margin: \"10px 10px 10px 15px\",\r\n              overflow: \"scroll\",\r\n              overflowX: \"hidden\",\r\n              height: \"55vh\",\r\n            }}\r\n          >\r\n            {thisImageComment.map(({ data, id }) => (\r\n              <div\r\n                style={{\r\n                  display: \"flex\",\r\n                  // alignItems: \"center\",\r\n                  margin: \"5px 7px 9px 5px \",\r\n                }}\r\n                key={id}\r\n              >\r\n                <p>\r\n                  <span\r\n                    style={{\r\n                      color: \"#610909\",\r\n                      fontSize: \"15px\",\r\n                      fontWeight: \"bold\",\r\n                      marginRight: \"5px\",\r\n                    }}\r\n                  >\r\n                    {data ? (\r\n                      <Link\r\n                        to={`/profile/${data.commentUserUid}`}\r\n                        style={{ textDecoration: \"none\" }}\r\n                      >\r\n                        {data.commentUser}{\" \"}\r\n                      </Link>\r\n                    ) : null}{\" \"}\r\n                    :\r\n                  </span>\r\n                  <span style={{ fontSize: \"15px\", color: \"#4a4747\" }}>\r\n                    {data ? data.comment : null}{\" \"}\r\n                  </span>\r\n                  <span style={{ color: \"gray\", fontSize: \"10px\" }}>\r\n                    {data\r\n                      ? data.timestamp\r\n                        ? data.timestamp.toDate().toDateString()\r\n                        : null\r\n                      : null}\r\n                  </span>\r\n                </p>\r\n              </div>\r\n            ))}\r\n          </div>\r\n\r\n          <div\r\n            style={{\r\n              position: \"fixed\",\r\n              bottom: \"0px\",\r\n              width: \"40vw\",\r\n              backgroundColor: \"#b7bdb9\",\r\n              borderTop: \"2px solid gray\",\r\n            }}\r\n          >\r\n            <div\r\n              style={{\r\n                display: \"flex\",\r\n                alignItems: \"center\",\r\n                justifyContent: \"space-between\",\r\n                margin: \"10px 10px 0 10px\",\r\n              }}\r\n            >\r\n              <div>\r\n                {post.liked.includes(user.user.uid) ? (\r\n                  <Favorite\r\n                    style={{\r\n                      marginLeft: \"10px\",\r\n                      marginRight: \"10px\",\r\n                      color: \"red\",\r\n                      cursor: \"pointer\",\r\n                    }}\r\n                    onClick={() => Liked(true)}\r\n                  />\r\n                ) : (\r\n                  <FavoriteBorder\r\n                    style={{\r\n                      marginLeft: \"10px\",\r\n                      marginRight: \"10px\",\r\n                      cursor: \"pointer\",\r\n                    }}\r\n                    onClick={() => Liked(false)}\r\n                  />\r\n                )}\r\n\r\n                <Comment />\r\n              </div>\r\n              <div>\r\n                <FacebookShareButton\r\n                  url={window.location.href}\r\n                  // quote={props.joke.setup + props.joke.punchline}\r\n                  hashtag=\"#StupidProgrammer\"\r\n                >\r\n                  <FacebookIcon size={25} round={true} />\r\n                </FacebookShareButton>\r\n                <WhatsappShareButton\r\n                  url={window.location.href}\r\n                  // quote={props.joke.setup + props.joke.punchline}\r\n                  hashtag=\"#StupidProgrammer\"\r\n                >\r\n                  <WhatsappIcon\r\n                    size={25}\r\n                    round={true}\r\n                    style={{ marginLeft: \"5px\", marginRight: \"5px\" }}\r\n                  />\r\n                </WhatsappShareButton>\r\n                <LinkedinShareButton\r\n                  url={window.location.href}\r\n                  // quote={props.joke.setup + props.joke.punchline}\r\n                  hashtag=\"#StupidProgrammer\"\r\n                >\r\n                  <LinkedinIcon size={25} round={true} />\r\n                </LinkedinShareButton>\r\n              </div>\r\n            </div>\r\n            <p\r\n              style={{\r\n                marginLeft: \"10px\",\r\n                color: \"gray\",\r\n                marginTop: \"-5px\",\r\n                fontSize: \"10px\",\r\n              }}\r\n            >\r\n              {post.liked.length} likes {thisImageComment.length} comments\r\n            </p>\r\n            <InputEmoji\r\n              maxLength={200}\r\n              style={{ width: \"100vw\", backgroundColor: \"gray\" }}\r\n              value={comment}\r\n              onChange={setComment}\r\n              cleanOnEnter\r\n              onEnter={PostComment}\r\n              placeholder=\"Type a message and Enter \"\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    ) : (\r\n      <div style={{ marginLeft: \"14vw\", marginTop: \"5vh\" }}>\r\n        <img\r\n          src={notFound}\r\n          alt=\"page Not Found Try with valid link\"\r\n          style={{ width: \"70vw\" }}\r\n        />\r\n      </div>\r\n    )\r\n  ) : (\r\n    <img\r\n      src={loading}\r\n      alt=\"image is loading..\"\r\n      style={{ marginLeft: \"40%\", marginTop: \"20vh\", width: \"50px\" }}\r\n    />\r\n  );\r\n}\r\n\r\nexport default IndividualImage;\r\n"],"sourceRoot":""}