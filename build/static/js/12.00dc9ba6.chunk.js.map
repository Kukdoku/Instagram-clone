{"version":3,"sources":["images/unnamed.png","pages/SignUp.js"],"names":["SignUp","history","useHistory","user","useContext","Usercontext","useState","name","setName","userName","setUserName","email","setEmail","password","setPassword","confirmPassword","setComfirmPassword","error","setError","isInvalid","trim","signUp","e","a","preventDefault","doesUsernameExist","usernameExists","length","firebase","auth","createUserWithEmailAndPassword","createdUserResult","updateProfile","displayName","firestore","collection","add","userId","uid","profile_photo","chat_friends","chatUrl","username","toLowerCase","fullName","emailAddress","following","follower","dateCreated","Date","now","profilePicUpdatedAt","status","push","ROUTES","window","location","reload","message","className","src","SignupImage","alt","style","textAlign","color","onSubmit","type","value","onChange","target","placeholder","disabled","variant","to"],"mappings":"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","file":"static/js/12.00dc9ba6.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/unnamed.a1db3f1a.png\";","import React, { useState, useContext } from \"react\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport * as ROUTES from \"../constants/routes\";\r\nimport SignupImage from \"../images/unnamed.png\";\r\nimport { doesUsernameExist } from \"../services/firebase\";\r\nimport firebase from \"firebase\";\r\nimport { db, auth } from \"../firebase\";\r\n\r\nimport \"./signup.css\";\r\nimport Usercontext from \"../context/user\";\r\nimport { Button, Input } from \"@material-ui/core\";\r\n\r\nfunction SignUp() {\r\n  const history = useHistory();\r\n  const user = useContext(Usercontext);\r\n  const [name, setName] = useState(\"\");\r\n  const [userName, setUserName] = useState(\"\");\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [confirmPassword, setComfirmPassword] = useState(\"\");\r\n  const [error, setError] = useState(\"\");\r\n\r\n  const isInvalid =\r\n    name.trim() === \"\" ||\r\n    userName.trim() === \"\" ||\r\n    email.trim() === \"\" ||\r\n    password.trim() === \"\" ||\r\n    confirmPassword.trim() === \"\";\r\n\r\n  const signUp = async (e) => {\r\n    e.preventDefault();\r\n\r\n    const usernameExists = await doesUsernameExist(userName);\r\n    // console.log(usernameExists);\r\n\r\n    if (password === confirmPassword) {\r\n      if (!usernameExists.length) {\r\n        // console.log(\"hello\");\r\n        try {\r\n          const createdUserResult = await firebase\r\n            .auth()\r\n            .createUserWithEmailAndPassword(email, password);\r\n\r\n          await createdUserResult.user.updateProfile({\r\n            displayName: userName,\r\n          });\r\n\r\n          await firebase\r\n            .firestore()\r\n            .collection(\"users\")\r\n            .add({\r\n              userId: createdUserResult.user.uid,\r\n              profile_photo: \"\",\r\n              chat_friends: [],\r\n              chatUrl: {},\r\n              username: userName.toLowerCase(),\r\n              fullName: name.toLowerCase(),\r\n              emailAddress: email.toLowerCase(),\r\n              following: [createdUserResult.user.uid],\r\n              follower: [createdUserResult.user.uid],\r\n              dateCreated: Date.now(),\r\n              profilePicUpdatedAt: \"\",\r\n              status: \"\",\r\n            });\r\n          history.push(ROUTES.HOME);\r\n          window.location.reload()\r\n        } catch (error) {\r\n          setName(\"\");\r\n          setUserName(\"\");\r\n          setEmail(\"\");\r\n          setPassword(\"\");\r\n          setComfirmPassword(\"\");\r\n          setError(error.message);\r\n        }\r\n      } else {\r\n        setError(\"This username is already taken\");\r\n      }\r\n    } else {\r\n      setError(\"password and confirm password did not match\");\r\n    }\r\n  };\r\n\r\n  return user.user ? (\r\n    <p>\r\n      {\" \"}\r\n      Sorry permission denied, You have to SignOout first for entering this page{\" \"}\r\n    </p>\r\n  ) : (\r\n    <div className=\"signup\">\r\n      <div className=\"signup__left\">\r\n        <img src={SignupImage} alt=\"signup image\" className=\"signup_image\" />\r\n      </div>\r\n      <div className=\"signup__right\">\r\n        <h2 style={{ textAlign: \"center\" }}> SignUp</h2>\r\n        {error && <p style={{ color: \"red\" }}> {error}</p>}\r\n        <form onSubmit={signUp} className=\"signup__form\">\r\n          <Input\r\n            type=\"text\"\r\n            value={userName}\r\n            onChange={(e) => setUserName(e.target.value)}\r\n            placeholder=\"Username :\"\r\n            className=\"signup__input\"\r\n          />\r\n\r\n          <Input\r\n            type=\"text\"\r\n            value={name}\r\n            onChange={(e) => setName(e.target.value)}\r\n            placeholder=\"Name :\"\r\n            className=\"signup__input\"\r\n          />\r\n\r\n          <Input\r\n            type=\"text\"\r\n            value={email}\r\n            onChange={(e) => setEmail(e.target.value)}\r\n            placeholder=\"Email\"\r\n            className=\"signup__input\"\r\n          />\r\n\r\n          <Input\r\n            type=\"password\"\r\n            value={password}\r\n            onChange={(e) => setPassword(e.target.value)}\r\n            placeholder=\"Password :\"\r\n            className=\"signup__input\"\r\n          />\r\n\r\n          <Input\r\n            type=\"password\"\r\n            value={confirmPassword}\r\n            onChange={(e) => setComfirmPassword(e.target.value)}\r\n            placeholder=\"Confirm Password :\"\r\n            className=\"signup__input\"\r\n          />\r\n          <Button type=\"submit\" disabled={isInvalid} className=\"signup__input\" variant=\"contained\">\r\n            SignUp\r\n          </Button>\r\n        </form>\r\n        <p>\r\n          {\" \"}\r\n          if you have a account <Link to={ROUTES.LOGIN}>Login</Link>\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SignUp;\r\n"],"sourceRoot":""}